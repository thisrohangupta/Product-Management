<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>YAML Gallery</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.5/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-900">
  <main class="container mx-auto p-4 grid gap-4 grid-cols-1 md:grid-cols-2">
  
      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.github/workflows/blank.yml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-0">View</button>
        <dialog id="modal-0" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.github/workflows/demo-pixel.yml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-1">View</button>
        <dialog id="modal-1" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v4

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-2">View</button>
        <dialog id="modal-2" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: CD
  identifier: CD
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: CD
        identifier: CD
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: kubernetes
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  manifests:
                    - manifest:
                        identifier: k8s_example
                        type: K8sManifest
                        spec:
                          store:
                            type: Github
                            spec:
                              connectorRef: &lt;+input&gt;
                  artifacts:
                    primary:
                      primaryArtifactRef: &lt;+input&gt;
                      sources: &lt;+input&gt;
                  variables:
                    - name: token
                      type: String
                      value: &lt;+input&gt;
                    - name: password
                      type: Secret
                      value: &lt;+input&gt;
                    - name: cpu
                      type: Number
                      value: &lt;+input&gt;
          environment:
            environmentRef: k8sdev
            deployToAll: false
            infrastructureDefinitions:
              - identifier: eks
                inputs:
                  identifier: eks
                  type: KubernetesAws
                  spec:
                    connectorRef: &lt;+input&gt;
                    cluster: &lt;+input&gt;
                    namespace: &lt;+input&gt;
                    releaseName: &lt;+input&gt;
                    region: &lt;+input&gt;
                  allowSimultaneousDeployments: &lt;+input&gt;
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CDNG_Demo_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-3">View</button>
        <dialog id="modal-3" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: CDNG Demo Pipeline
  identifier: CDNG_Demo_Pipeline
  projectIdentifier: Rohan
  orgIdentifier: default
  tags:
    owner: Rohan
    status: demo
  stages:
    - stage:
        name: Deploy to Dev
        identifier: Deploy_to_Dev
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          execution:
            steps:
              - step:
                  type: K8sDryRun
                  name: Dry Run
                  identifier: Dry_Run
                  spec:
                    delegateSelectors:
                      - cd-pm
                  timeout: 10m
                  failureStrategies: []
              - step:
                  type: HarnessApproval
                  name: Harness Approval
                  identifier: Harness_Approval
                  spec:
                    approvalMessage: Please review the following information and approve the pipeline progression
                    includePipelineExecutionHistory: true
                    approvers:
                      userGroups:
                        - account._account_all_users
                      minimumCount: 1
                      disallowPipelineExecutor: false
                    approverInputs: []
                  timeout: 1d
              - step:
                  type: K8sRollingDeploy
                  name: Rolling Deployment
                  identifier: Rolling_Deployment
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
                  timeout: 10m
              - step:
                  type: Verify
                  name: Verify_1
                  identifier: Verify_1
                  spec:
                    isMultiServicesOrEnvs: true
                    type: Auto
                    monitoredService:
                      type: Default
                      spec: {}
                    spec:
                      sensitivity: HIGH
                      duration: 5m
                      deploymentTag: &lt;+artifacts.primary.tag&gt;
                  timeout: 2h
                  failureStrategies:
                    - onFailure:
                        errors:
                          - Verification
                        action:
                          type: ManualIntervention
                          spec:
                            timeout: 2h
                            onTimeout:
                              action:
                                type: StageRollback
                    - onFailure:
                        errors:
                          - Unknown
                        action:
                          type: ManualIntervention
                          spec:
                            timeout: 2h
                            onTimeout:
                              action:
                                type: Ignore
            rollbackSteps:
              - step:
                  name: Rolling Rollback
                  identifier: rollingRollback
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
          environments:
            metadata:
              parallel: true
            values:
              - environmentRef: Azure_Web_Apps
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
              - environmentRef: L3
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
          services:
            values:
              - serviceRef: nginxdemo
                serviceInputs:
                  serviceDefinition:
                    type: Kubernetes
                    spec:
                      artifacts:
                        primary:
                          primaryArtifactRef: &lt;+input&gt;
                          sources: &lt;+input&gt;
            metadata:
              parallel: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: Deploy QA
        identifier: Deploy_QA
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            useFromStage:
              stage: Deploy_to_Dev
          environment:
            environmentRef: staging
            deployToAll: false
            infrastructureDefinitions:
              - identifier: productstaging
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: template
        identifier: template
        template:
          templateRef: Deploy_Stage_1
          versionLabel: 1.0.0
          templateInputs:
            type: Deployment
            spec:
              service:
                serviceInputs:
                  serviceDefinition:
                    type: Kubernetes
                    spec:
                      artifacts:
                        primary:
                          primaryArtifactRef: &lt;+input&gt;
                          sources: &lt;+input&gt;
    - stage:
        name: chained pipeline
        identifier: chained_pipeline
        description: ""
        type: Pipeline
        spec:
          org: default
          pipeline: Rohan_Sandbox
          project: Rohan
          inputs:
            identifier: Rohan_Sandbox
            stages:
              - stage:
                  identifier: Deploy
                  type: Deployment
                  spec:
                    service:
                      serviceInputs:
                        serviceDefinition:
                          type: Kubernetes
                          spec:
                            artifacts:
                              primary:
                                primaryArtifactRef: &lt;+input&gt;
                                sources: &lt;+input&gt;
                    environmentGroup:
                      envGroupRef: &lt;+input&gt;
                      deployToAll: &lt;+input&gt;
                      environments: &lt;+input&gt;
          outputs: []
  allowStageExecutions: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD_CV_Demo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-4">View</button>
        <dialog id="modal-4" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: CD CV Demo
    identifier: CD_CV_Demo
    allowStageExecutions: false
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    tags:
        rolling deployment: ""
        change-intel: ""
    stages:
        - stage:
              name: Deploy to Dev
              identifier: Deploy_to_Dev
              description: ""
              type: Deployment
              spec:
                  serviceConfig:
                      serviceRef: todolist
                      serviceDefinition:
                          type: Kubernetes
                          spec:
                              variables: []
                              manifests:
                                  - manifest:
                                        identifier: dev
                                        type: K8sManifest
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: ThisRohanGupta_Repo
                                                    gitFetchType: Branch
                                                    paths:
                                                        - main/
                                                    branch: main
                                            skipResourceVersioning: false
                              artifacts:
                                  primary:
                                      spec:
                                          connectorRef: account.Rohan_Dockerhub
                                          imagePath: library/nginx
                                          tag: &lt;+input&gt;
                                      type: DockerRegistry
                  infrastructure:
                      environmentRef: development
                      infrastructureDefinition:
                          type: KubernetesDirect
                          spec:
                              connectorRef: account.k8s_staging
                              namespace: dev
                              releaseName: release-&lt;+INFRA_KEY&gt;
                      allowSimultaneousDeployments: false
                  execution:
                      steps:
                          - step:
                                name: Rollout Deployment
                                identifier: rolloutDeployment
                                type: K8sRollingDeploy
                                timeout: 10m
                                spec:
                                    skipDryRun: false
                      rollbackSteps:
                          - step:
                                name: Rollback Rollout Deployment
                                identifier: rollbackRolloutDeployment
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD_Demo_302.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-5">View</button>
        <dialog id="modal-5" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: CD Demo
    identifier: CD_Demo
    versionLabel: 3.0.3
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: helloworld
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
                        manifests:
                            - manifest:
                                  identifier: dev
                                  type: K8sManifest
                                  spec:
                                      store:
                                          type: Github
                                          spec:
                                              connectorRef: ThisRohanGupta_Repo
                                              gitFetchType: Branch
                                              paths:
                                                  - cdng/
                                              branch: main
                                      skipResourceVersioning: false
                        artifacts:
                            primary:
                                spec:
                                    connectorRef: account.Rohan_Dockerhub
                                    imagePath: library/nginx
                                    tag: &lt;+input&gt;
                                type: DockerRegistry
            infrastructure:
                environmentRef: development
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: gkeautopilot
                        namespace: rohan-dev
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: K8sRollingDeploy
                          name: Rolling Deployment
                          identifier: Rolling_Deployment
                          spec:
                              skipDryRun: false
                          timeout: 10m
                    - step:
                          type: ShellScript
                          name: Miner Script
                          identifier: Miner_Script
                          spec:
                              shell: Bash
                              onDelegate: true
                              source:
                                  type: Inline
                                  spec:
                                      script: |-
                                          echo &lt;+pipeline.name&gt;

                                          echo &lt;+stage.name&gt; 
                              environmentVariables: []
                              outputVariables: []
                              executionTarget: {}
                          timeout: 10m
                rollbackSteps: []
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD_Demo_303.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-6">View</button>
        <dialog id="modal-6" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: CD Demo
    identifier: CD_Demo
    versionLabel: 3.0.3
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: helloworld
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
                        manifests:
                            - manifest:
                                  identifier: dev
                                  type: K8sManifest
                                  spec:
                                      store:
                                          type: Github
                                          spec:
                                              connectorRef: ThisRohanGupta_Repo
                                              gitFetchType: Branch
                                              paths:
                                                  - cdng/
                                              branch: main
                                      skipResourceVersioning: false
                        artifacts:
                            primary:
                                spec:
                                    connectorRef: account.Rohan_Dockerhub
                                    imagePath: library/nginx
                                    tag: &lt;+input&gt;
                                type: DockerRegistry
            infrastructure:
                environmentRef: development
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: gkeautopilot
                        namespace: rohan-dev
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: K8sRollingDeploy
                          name: Rolling Deployment
                          identifier: Rolling_Deployment
                          spec:
                              skipDryRun: false
                          timeout: 10m
                    - step:
                          type: ShellScript
                          name: Miner Script
                          identifier: Miner_Script
                          spec:
                              shell: Bash
                              onDelegate: true
                              source:
                                  type: Inline
                                  spec:
                                      script: |-
                                          echo &lt;+pipeline.name&gt;
                                          echo &lt;+service.name&gt;
                                          echo &lt;+stage.name&gt; 
                              environmentVariables: []
                              outputVariables: []
                              executionTarget: {}
                          timeout: 10m
                rollbackSteps: []
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD_Harness_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-7">View</button>
        <dialog id="modal-7" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: CD Harness
    identifier: CD_Harness
    projectIdentifier: Rohan
    orgIdentifier: default
    tags: {}
    stages:
        - stage:
              name: Deploy1
              identifier: Deploy
              description: ""
              type: Deployment
              spec:
                  deploymentType: Kubernetes
                  service:
                      serviceRef: publicnginx
                      serviceInputs:
                          serviceDefinition:
                              type: Kubernetes
                              spec:
                                  artifacts:
                                      primary:
                                          type: DockerRegistry
                                          spec:
                                              tag: &lt;+input&gt;
                  environment:
                      environmentRef: L3
                      deployToAll: false
                      infrastructureDefinitions:
                          - identifier: L3_K8s
                  execution:
                      steps:
                          - step:
                                name: Rollout Deployment
                                identifier: rolloutDeployment
                                type: K8sRollingDeploy
                                timeout: 10m
                                spec:
                                    skipDryRun: false
                      rollbackSteps:
                          - step:
                                name: Rollback Rollout Deployment
                                identifier: rollbackRolloutDeployment
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
              variables:
                  - name: foo
                    type: String
                    value: ""
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CD_Tyler.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-8">View</button>
        <dialog id="modal-8" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: CD Tyler
  identifier: CD_Tyler
  template:
    templateRef: End_2_End_Pipeline_Template
    versionLabel: 0.0.1
    templateInputs:
      stages:
        - stage:
            identifier: Dev
            type: Deployment
            spec:
              service:
                serviceRef: &lt;+input&gt;
                serviceInputs: &lt;+input&gt;
  tags: {}
  projectIdentifier: Rohan
  orgIdentifier: default
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CI_CD_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-9">View</button>
        <dialog id="modal-9" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: CI CD Pipeline
    identifier: CI_CD_Pipeline
    projectIdentifier: git_experience
    orgIdentifier: default
    tags: {}
    stages:
        - stage:
              name: CD Stage
              identifier: CD_Stage
              description: ""
              type: Deployment
              spec:
                  serviceConfig:
                      serviceRef: nginx
                      serviceDefinition:
                          type: Kubernetes
                          spec:
                              variables: []
                              manifests:
                                  - manifest:
                                        identifier: nginx
                                        type: K8sManifest
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: ThisRohanGupta
                                                    gitFetchType: Branch
                                                    paths:
                                                        - cdng/
                                                    repoName: Product-Management
                                                    branch: main
                                            skipResourceVersioning: false
                                  - manifest:
                                        identifier: dev_values
                                        type: Values
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: ThisRohanGupta
                                                    gitFetchType: Branch
                                                    paths:
                                                        - cdng/values.yaml
                                                    repoName: Product-Management
                                                    branch: main
                              artifacts:
                                  primary:
                                      type: DockerRegistry
                                      spec:
                                          connectorRef: public_dockerhub
                                          imagePath: library/nginx
                                          tag: &lt;+input&gt;
                  infrastructure:
                      environmentRef: dev
                      infrastructureDefinition:
                          type: KubernetesDirect
                          spec:
                              connectorRef: k8s_cluster
                              namespace: canary
                              releaseName: release-&lt;+INFRA_KEY&gt;
                      allowSimultaneousDeployments: false
                  execution:
                      steps:
                          - stepGroup:
                                name: Canary Phase
                                identifier: Canary_Phase
                                steps:
                                    - step:
                                          type: K8sCanaryDeploy
                                          name: Canary Deploy
                                          identifier: Canary_Deploy
                                          spec:
                                              skipDryRun: false
                                              instanceSelection:
                                                  spec:
                                                      count: 1
                                                  type: Count
                                          timeout: 10m
                                    - step:
                                          type: K8sCanaryDelete
                                          name: Cleanup Canary
                                          identifier: Cleanup_Canary
                                          spec:
                                              skipDryRun: false
                                          timeout: 10m
                          - stepGroup:
                                name: Full Rollout
                                identifier: Full_Rollout
                                steps:
                                    - step:
                                          type: K8sRollingDeploy
                                          name: Rolling Deploy
                                          identifier: Rolling_Deploy
                                          spec:
                                              skipDryRun: false
                                          timeout: 10m
                      rollbackSteps:
                          - step:
                                name: Rollback Rollout Deployment
                                identifier: rollbackRolloutDeployment
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
                  serviceDependencies: []
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/CLone_for_STO.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-10">View</button>
        <dialog id="modal-10" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">---
pipeline:
  projectIdentifier: "Rohan"
  orgIdentifier: "default"
  tags:
    owner: "Rohan"
    status: "demo"
  stages:
  - stage:
      name: "Deploy to Dev"
      identifier: "Deploy_to_Dev"
      description: ""
      type: "Deployment"
      spec:
        deploymentType: "Kubernetes"
        execution:
          steps:
          - step:
              type: "K8sDryRun"
              name: "Dry Run"
              identifier: "Dry_Run"
              spec:
                delegateSelectors:
                - "cd-pm"
              timeout: "10m"
              failureStrategies: []
          - step:
              type: "HarnessApproval"
              name: "Harness Approval"
              identifier: "Harness_Approval"
              spec:
                approvalMessage: "Please review the following information and approve\
                  \ the pipeline progression"
                includePipelineExecutionHistory: true
                approvers:
                  userGroups:
                  - "account._account_all_users"
                  minimumCount: 1
                  disallowPipelineExecutor: false
                approverInputs: []
              timeout: "1d"
          - step:
              type: "K8sRollingDeploy"
              name: "Rolling Deployment"
              identifier: "Rolling_Deployment"
              spec:
                skipDryRun: false
                pruningEnabled: false
              timeout: "10m"
          rollbackSteps:
          - step:
              name: "Rolling Rollback"
              identifier: "rollingRollback"
              type: "K8sRollingRollback"
              timeout: "10m"
              spec: {}
        environments:
          metadata:
            parallel: true
          values:
          - environmentRef: "Azure_Web_Apps"
            deployToAll: true
            infrastructureDefinitions: "&lt;+input&gt;"
          - environmentRef: "L3"
            deployToAll: true
            infrastructureDefinitions: "&lt;+input&gt;"
        services:
          values: "&lt;+input&gt;"
          metadata:
            parallel: false
      tags: {}
      failureStrategies:
      - onFailure:
          errors:
          - "AllErrors"
          action:
            type: "StageRollback"
  - stage:
      name: "Deploy QA"
      identifier: "Deploy_QA"
      description: ""
      type: "Deployment"
      spec:
        deploymentType: "Kubernetes"
        service:
          useFromStage:
            stage: "Deploy_to_Dev"
        environment:
          environmentRef: "staging"
          deployToAll: false
          infrastructureDefinitions:
          - identifier: "productstaging"
        execution:
          steps:
          - step:
              name: "Rollout Deployment"
              identifier: "rolloutDeployment"
              type: "K8sRollingDeploy"
              timeout: "10m"
              spec:
                skipDryRun: false
                pruningEnabled: false
          rollbackSteps:
          - step:
              name: "Rollback Rollout Deployment"
              identifier: "rollbackRolloutDeployment"
              type: "K8sRollingRollback"
              timeout: "10m"
              spec:
                pruningEnabled: false
      tags: {}
      failureStrategies:
      - onFailure:
          errors:
          - "AllErrors"
          action:
            type: "StageRollback"
  allowStageExecutions: true
  identifier: "CLone_for_STO"
  name: "CLone for STO"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Canary_Deployment_CV_CD.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-11">View</button>
        <dialog id="modal-11" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: Canary Deployment CV CD
    identifier: Canary_Deployment_CV_CD
    allowStageExecutions: false
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    tags:
        canary-deployment: ""
        continuous-verification: ""
    stages:
        - stage:
              name: Deploy to Prod
              identifier: Deploy_to_Prod
              description: ""
              type: Deployment
              spec:
                  serviceConfig:
                      serviceRef: todolist
                      serviceDefinition:
                          type: Kubernetes
                          spec:
                              variables: []
                              manifests:
                                  - manifest:
                                        identifier: prod
                                        type: K8sManifest
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: ThisRohanGupta_Repo
                                                    gitFetchType: Branch
                                                    paths:
                                                        - cdng/
                                                    branch: main
                                            skipResourceVersioning: false
                              artifacts:
                                  primary:
                                      spec:
                                          connectorRef: account.Rohan_Dockerhub
                                          imagePath: library/nginx
                                          tag: &lt;+input&gt;
                                      type: DockerRegistry
                  infrastructure:
                      environmentRef: production
                      infrastructureDefinition:
                          type: KubernetesDirect
                          spec:
                              connectorRef: account.k8s_staging
                              namespace: rohan-canary
                              releaseName: release-&lt;+INFRA_KEY&gt;
                      allowSimultaneousDeployments: false
                  execution:
                      steps:
                          - stepGroup:
                                name: Primary Deployment
                                identifier: primaryDepoyment
                                steps:
                                    - step:
                                          name: Rolling Deployment
                                          identifier: rollingDeployment
                                          type: K8sRollingDeploy
                                          timeout: 10m
                                          spec:
                                              skipDryRun: false
                      rollbackSteps:
                          - step:
                                name: Canary Delete
                                identifier: rollbackCanaryDelete
                                type: K8sCanaryDelete
                                timeout: 10m
                                spec: {}
                          - step:
                                name: Rolling Rollback
                                identifier: rollingRollback
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
                  serviceDependencies: []
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Datadog_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-12">View</button>
        <dialog id="modal-12" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Datadog
  identifier: Datadog
  versionLabel: "1.0"
  type: MonitoredService
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  spec:
    serviceRef: kubernetes
    environmentRef: k8sdev
    type: Application
    sources:
      healthSources:
        - type: DatadogMetrics
          identifier: datadogdev
          name: datadog-dev
          spec:
            connectorRef: &lt;+input&gt;
            feature: Datadog Cloud Metrics
            metricDefinitions:
              - identifier: datadog-cpu
                dashboardName: app-infra
                metricPath: datadog-cpu
                metricName: datadog-cpu
                metric: ""
                metricTags:
                  - ""
                isManualQuery: true
                isCustomCreatedMetric: true
                query: &lt;+input&gt;
                sli:
                  enabled: false
                analysis:
                  riskProfile:
                    riskCategory: Errors
                    thresholdTypes:
                      - ACT_WHEN_HIGHER
                  liveMonitoring:
                    enabled: false
                  deploymentVerification:
                    enabled: true
                    serviceInstanceFieldName: host
            metricPacks:
              - identifier: Custom
                metricThresholds:
                  - type: IgnoreThreshold
                    spec:
                      action: Ignore
                    criteria:
                      type: Absolute
                      spec:
                        greaterThan: 1
                        lessThan: 0.25
                    metricType: Custom
                    metricName: datadog-cpu
      changeSources:
        - category: Deployment
          type: HarnessCD
          spec:
            harnessApplicationId: H4t34v7JSgSDzl7FmyBWRA
            harnessServiceId: NO1tR6E-RsuFAKY0wVi0qw
            harnessEnvironmentId: ciIhF3JnSoS88Yfiqbf6BQ
          enabled: true
          name: Deployment Verification
          identifier: Deployment_Verification
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Demo_Stage_v1.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-13">View</button>
        <dialog id="modal-13" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Demo Stage
    identifier: Demo_Stage
    versionLabel: v1
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        description: ""
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: nginx
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
                        manifests:
                            - manifest:
                                  identifier: dev
                                  type: K8sManifest
                                  spec:
                                      store:
                                          type: Github
                                          spec:
                                              connectorRef: ThisRohanGupta_Repo
                                              gitFetchType: Branch
                                              paths:
                                                  - cdng/
                                              branch: &lt;+input&gt;
                                      skipResourceVersioning: false
                        artifacts:
                            primary:
                                spec:
                                    connectorRef: account.Rohan_Dockerhub
                                    imagePath: library/nginx
                                    tag: &lt;+input&gt;
                                type: DockerRegistry
            infrastructure:
                environmentRef: &lt;+input&gt;
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: gkeautopilot
                        namespace: &lt;+service.name&gt;-&lt;+env.name&gt;
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: ShellScript
                          name: Print Variables
                          identifier: Print_Variables
                          spec:
                              shell: Bash
                              onDelegate: true
                              source:
                                  type: Inline
                                  spec:
                                      script: |+
                                          echo &lt;+pipeline.name&gt;

                                          echo &lt;+stage.name&gt;

                                          echo &lt;+serviceConfig.serviceRef&gt;


                              environmentVariables: []
                              outputVariables: []
                              executionTarget: {}
                          timeout: 10m
                    - step:
                          name: Rollout Deployment
                          identifier: rolloutDeployment
                          type: K8sRollingDeploy
                          timeout: 10m
                          spec:
                              skipDryRun: false
                    - step:
                          type: Http
                          name: Health Check
                          identifier: Health_Check
                          spec:
                              url: https://google.com
                              method: GET
                              headers: []
                              outputVariables: []
                          timeout: 10s
                rollbackSteps:
                    - step:
                          name: Rollback Rollout Deployment
                          identifier: rollbackRolloutDeployment
                          type: K8sRollingRollback
                          timeout: 10m
                          spec: {}
            serviceDependencies: []
        tags: {}
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Deploy_2.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-14">View</button>
        <dialog id="modal-14" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Deploy
  identifier: Deploy
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: false
          - step:
              type: ShellScript
              name: Shell Script
              identifier: ShellScript
              spec:
                shell: Bash
                onDelegate: true
                source:
                  type: Inline
                  spec:
                    script: kubectl get pods -n &lt;+infra.namespace&gt;
                environmentVariables: []
                outputVariables: []
              timeout: 10m
          - step:
              type: Http
              name: HTTP
              identifier: HTTP
              spec:
                url: https://google.com
                method: GET
                headers: []
                outputVariables: []
              timeout: 10s
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
  versionLabel: "2.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Deploy_K8s_Demo_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-15">View</button>
        <dialog id="modal-15" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Deploy K8s Demo
  type: Stage
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      execution:
        steps:
          - step:
              type: K8sDryRun
              name: Dry Run
              identifier: Dry_Run
              spec: {}
              timeout: 10m
          - step:
              type: K8sApply
              name: Apply
              identifier: Apply
              spec:
                filePaths:
                  - cdng/
                skipDryRun: false
                skipSteadyStateCheck: false
                skipRendering: false
                overrides: []
              timeout: 10m
          - step:
              type: HarnessApproval
              name: Approval
              identifier: Approval
              spec:
                approvalMessage: Please review the following information and approve the pipeline progression
                includePipelineExecutionHistory: true
                isAutoRejectEnabled: false
                approvers:
                  userGroups:
                    - account._account_all_users
                  minimumCount: 1
                  disallowPipelineExecutor: false
                approverInputs: []
              timeout: 1d
              when:
                stageStatus: Success
          - step:
              type: K8sRollingDeploy
              name: Rolling Deployment
              identifier: RRolling_Deployment
              spec:
                skipDryRun: &lt;+input&gt;
                pruningEnabled: false
              timeout: 10m
          - step:
              type: K8sDelete
              name: Cleanup
              identifier: Cleanup
              spec:
                deleteResources:
                  type: ReleaseName
                  spec:
                    deleteNamespace: false
              timeout: 10m
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
      environment:
        environmentRef: k8sdev
        deployToAll: false
        infrastructureDefinitions:
          - identifier: dev
            inputs:
              identifier: dev
              type: KubernetesDirect
              spec:
                namespace: &lt;+input&gt;
      service:
        serviceRef: kubernetes
        serviceInputs:
          serviceDefinition:
            type: Kubernetes
            spec:
              artifacts:
                primary:
                  primaryArtifactRef: &lt;+input&gt;
                  sources: &lt;+input&gt;
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
    when:
      pipelineStatus: Success
  identifier: Deploy_K8s_Demo
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Deploy_to_Prod_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-16">View</button>
        <dialog id="modal-16" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Deploy to Prod
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        useFromStage:
          stage: Deploy_to_Dev
      environment:
        environmentRef: staging
        deployToAll: false
        infrastructureDefinitions:
          - identifier: productstaging
      execution:
        steps:
          - stepGroup:
              name: Canary Deployment
              identifier: canaryDepoyment
              steps:
                - step:
                    name: Canary Deployment
                    identifier: canaryDeployment
                    type: K8sCanaryDeploy
                    timeout: 10m
                    spec:
                      instanceSelection:
                        type: Count
                        spec:
                          count: 1
                      skipDryRun: false
                - step:
                    name: Canary Delete
                    identifier: canaryDelete
                    type: K8sCanaryDelete
                    timeout: 10m
                    spec: {}
          - stepGroup:
              name: Primary Deployment
              identifier: primaryDepoyment
              steps:
                - step:
                    name: Rolling Deployment
                    identifier: rollingDeployment
                    type: K8sRollingDeploy
                    timeout: 10m
                    spec:
                      skipDryRun: false
        rollbackSteps:
          - step:
              name: Canary Delete
              identifier: rollbackCanaryDelete
              type: K8sCanaryDelete
              timeout: 10m
              spec: {}
          - step:
              name: Rolling Rollback
              identifier: rollingRollback
              type: K8sRollingRollback
              timeout: 10m
              spec: {}
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
  identifier: Deploy_to_Prod
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Deployment_1.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-17">View</button>
        <dialog id="modal-17" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Deployment
  type: Stage
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: k8sdev
        deployToAll: false
        infrastructureDefinitions:
          - identifier: playground
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: false
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
    when: &lt;+input&gt;
    variables:
      - name: User
        type: String
        description: User who owns the template
        required: false
        value: Rohan
  identifier: Deployment
  versionLabel: "1"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Dev.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-18">View</button>
        <dialog id="modal-18" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "Dev"
  name: "Dev"
  orgIdentifier: "default"
  projectIdentifier: "Rohan"
  pipeline:
    identifier: "CDNG_Demo_Pipeline"
    stages:
    - stage:
        identifier: "Deploy_to_Dev"
        type: "Deployment"
        spec:
          service:
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: "ng"
          environment:
            environmentRef: "staging"
            infrastructureDefinitions:
            - identifier: "productstaging"
    - stage:
        identifier: "Deploy_to_Prod"
        template:
          templateInputs:
            type: "Deployment"
            spec:
              service:
                serviceInputs:
                  serviceDefinition:
                    type: "Kubernetes"
                    spec:
                      artifacts:
                        primary:
                          primaryArtifactRef: "nginx"
                          sources:
                          - identifier: "nginx"
                            type: "DockerRegistry"
                            spec:
                              tag: "stable-perl"
              environment:
                environmentRef: "staging"
                infrastructureDefinitions:
                - identifier: "productstaging"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/DevDeploy.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-19">View</button>
        <dialog id="modal-19" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "DevDeploy"
  name: "DevDeploy"
  orgIdentifier: "default"
  projectIdentifier: "Rohan"
  pipeline:
    identifier: "Charles"
    stages:
    - stage:
        identifier: "Deploy"
        type: "Deployment"
        spec:
          service:
            serviceRef: "nginxcanary"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: "nginx"
                      sources:
                      - identifier: "nginx"
                        type: "DockerRegistry"
                        spec:
                          tag: "stable-perl"
          environments:
            values:
            - infrastructureDefinitions:
              - identifier: "productstaging"
                inputs:
                  identifier: "productstaging"
                  type: "KubernetesDirect"
                  spec:
                    namespace: "dev"
              environmentRef: "staging"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Dry_Run_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-20">View</button>
        <dialog id="modal-20" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Dry Run
  type: Step
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  spec:
    type: K8sDryRun
    spec: {}
    timeout: 10m
  identifier: Dry_Run
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Enforce_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-21">View</button>
        <dialog id="modal-21" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Enforce Pipeline
  identifier: Enforce_Pipeline
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: deploy
        identifier: deploy
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: k8s
          environment:
            environmentRef: k8sdev
            deployToAll: false
            infrastructureDefinitions:
              - identifier: playground
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: test
                  identifier: test
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: exit 0
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
            rollbackSteps:
              - step:
                  type: ShellScript
                  name: hello
                  identifier: hello
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: echo "hello from deploy stage 1"
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
        when:
          pipelineStatus: Success
    - stage:
        name: Deploy 2
        identifier: Deploy_2
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            useFromStage:
              stage: deploy
          environment:
            useFromStage:
              stage: deploy
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: fail
                  identifier: fail
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: exit 1
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
            rollbackSteps:
              - step:
                  type: ShellScript
                  name: rollback
                  identifier: rollback
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: echo "Rollback Stage Deploy 2"
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: PipelineRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Fetch_EWS_Creds_1.1.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-22">View</button>
        <dialog id="modal-22" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Fetch_EWS_Creds
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-
            if [  $env == 'int' ]; then
            EWS_USER1=${secrets.getValue("win-ews-int-user")}
            EWS_PWD1=${secrets.getValue("win-ews-int-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            else 
            if [  $env == 'perf' ]; then
            EWS_USER1=${secrets.getValue("win-ews-perf-user")}
            EWS_PWD1=${secrets.getValue("win-ews-perf-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            elif  [  $env == 'stage' ]; then
            EWS_USER1=${secrets.getValue("win-ews-stage-user")}
            EWS_PWD=${secrets.getValue("win-ews-stage-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}

            elif  [  $env == 'prod' ]; then 
            EWS_USER1=${secrets.getValue("win-ews-prod-user")}
            EWS_PWD1=${secrets.getValue("win-ews-prod-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            fi 
            fi 

            export  EWS_USER=${EWS_USER1}
            export  EWS_PWD=${EWS_PWD1}
      environmentVariables: []
      outputVariables:
        - name: EWS_USER
          type: Secret
          value: EWS_USER
        - name: EWS_PWD
          type: Secret
          value: EWS_PWD
    timeout: 10m
    when:
      stageStatus: Success
  identifier: Fetch_EWS_Creds
  versionLabel: "1.1"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Fetch_EWS_Creds_1.2.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-23">View</button>
        <dialog id="modal-23" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Fetch_EWS_Creds
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-
            if [  $env == 'int' ]; then
            EWS_USER1=${secrets.getValue("win-ews-int-user")}
            EWS_PWD1=${secrets.getValue("win-ews-int-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            else 
            if [  $env == 'perf' ]; then
            EWS_USER1=${secrets.getValue("win-ews-perf-user")}
            EWS_PWD1=${secrets.getValue("win-ews-perf-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            elif  [  $env == 'stage' ]; then
            EWS_USER1=${secrets.getValue("win-ews-stage-user")}
            EWS_PWD=${secrets.getValue("win-ews-stage-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}

            elif  [  $env == 'prod' ]; then 
            EWS_USER1=${secrets.getValue("win-ews-prod-user")}
            EWS_PWD1=${secrets.getValue("win-ews-prod-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            fi 
            fi 

            export  EWS_USER=${EWS_USER1}
            export  EWS_PWD=${EWS_PWD1}
      environmentVariables: []
      outputVariables:
        - name: EWS_USER
          type: Secret
          value: EWS_USER
        - name: EWS_PWD
          type: Secret
          value: EWS_PWD
    timeout: 10m
    when:
      stageStatus: Success
      condition: &lt;+input&gt;
  identifier: Fetch_EWS_Creds
  versionLabel: "1.2"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Forte.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-24">View</button>
        <dialog id="modal-24" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: Forte
    identifier: Forte
    allowStageExecutions: false
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    tags: {}
    stages:
        - stage:
              name: Deploy Service API
              identifier: Deploy_Service_API
              description: ""
              type: Deployment
              spec:
                  serviceConfig:
                      serviceRef: &lt;+input&gt;
                      serviceDefinition:
                          type: Kubernetes
                          spec:
                              variables: []
                              manifests:
                                  - manifest:
                                        identifier: dev
                                        type: K8sManifest
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: &lt;+input&gt;
                                                    gitFetchType: Branch
                                                    paths:
                                                        - cdng/&lt;+service.name&gt;/deploy/
                                                    repoName: &lt;+input&gt;
                                                    branch: &lt;+input&gt;
                                            skipResourceVersioning: false
                              artifacts:
                                  sidecars: []
                  infrastructure:
                      environmentRef: &lt;+input&gt;
                      infrastructureDefinition:
                          type: KubernetesDirect
                          spec:
                              connectorRef: rohan_product_cluster
                              namespace: rohan-dev
                              releaseName: release-&lt;+INFRA_KEY&gt;
                      allowSimultaneousDeployments: false
                  execution:
                      steps:
                          - step:
                                type: ShellScript
                                name: print
                                identifier: print
                                spec:
                                    shell: Bash
                                    onDelegate: true
                                    source:
                                        type: Inline
                                        spec:
                                            script: |-
                                                echo &lt;+pipeline.variables.deployment_number&gt;
                                                echo &lt;+pipeline.variables.namespace&gt;
                                    environmentVariables: []
                                    outputVariables: []
                                    executionTarget: {}
                                    delegateSelectors:
                                        - rohan-docker-delegate
                                timeout: 10m
                                failureStrategies: []
                      rollbackSteps:
                          - step:
                                name: Rollback Rollout Deployment
                                identifier: rollbackRolloutDeployment
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
                  serviceDependencies: []
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
    variables:
        - name: deployment_number
          type: String
          value: &lt;+input&gt;
        - name: namespace
          type: String
          value: '"hello"+&lt;+pipeline.variables.deployment_number&gt;'
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Golden.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-25">View</button>
        <dialog id="modal-25" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Golden
  identifier: Golden
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags:
    golden: ""
  stages:
    - stage:
        name: Dev
        identifier: Dev
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          environment:
            environmentRef: dev
            gitBranch: main
            deployToAll: false
            infrastructureDefinitions:
              - identifier: devk8s
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: qa
        identifier: qa
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            useFromStage:
              stage: Dev
          environment:
            environmentRef: stage
            gitBranch: main
            deployToAll: false
            infrastructureDefinitions:
              - identifier: qainfra
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: approval
        identifier: approval
        description: ""
        type: Approval
        spec:
          execution:
            steps:
              - step:
                  name: approve
                  identifier: approve
                  type: HarnessApproval
                  timeout: 1d
                  spec:
                    approvalMessage: |-
                      Please review the following information
                      and approve the pipeline progression
                    includePipelineExecutionHistory: true
                    approvers:
                      minimumCount: 1
                      disallowPipelineExecutor: false
                      userGroups:
                        - account.ProductManagement
                    isAutoRejectEnabled: false
                    approverInputs: []
        tags: {}
    - stage:
        name: prod
        identifier: prod
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            useFromStage:
              stage: Dev
          environment:
            environmentRef: k8sprod
            deployToAll: false
            infrastructureDefinitions:
              - identifier: prod
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Harness_Demo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-26">View</button>
        <dialog id="modal-26" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Harness Demo
  identifier: Harness_Demo
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy to L2
        identifier: Deploy_to_L2
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: publicnginx
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  artifacts:
                    primary:
                      type: DockerRegistry
                      spec:
                        tag: &lt;+input&gt;
          environment:
            environmentRef: L2
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L2_K8s
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
              - step:
                  name: Clean up L2
                  identifier: Clean_up_L2
                  template:
                    templateRef: Cleanup_Demo
                    versionLabel: 0.0.1
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: Approval to Production
        identifier: Approval_to_Production
        template:
          templateRef: Approval_to_Production
          versionLabel: 0.0.1
    - stage:
        name: Deploy to L3
        identifier: Deploy_to_L3
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
              - step:
                  name: Clean up L3
                  identifier: Clean_up_L3
                  template:
                    templateRef: Cleanup_Demo
                    versionLabel: 0.0.1
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
          services:
            values:
              - serviceRef: K8s
                serviceInputs:
                  serviceDefinition:
                    type: Kubernetes
                    spec:
                      variables:
                        - name: cpu
                          type: String
                          value: &lt;+input&gt;
                        - name: memory
                          type: String
                          value: &lt;+input&gt;
                      artifacts:
                        primary:
                          primaryArtifactRef: &lt;+input&gt;
                          sources: &lt;+input&gt;
              - serviceRef: Prometheus
            metadata:
              parallel: true
          environments:
            metadata:
              parallel: true
            values:
              - environmentRef: L3
                deployToAll: false
                infrastructureDefinitions:
                  - identifier: L3_K8s
              - environmentRef: demo_env
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
              - environmentRef: dev
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
              - environmentRef: eenvironment
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: Deploy to L1
        identifier: Deploy_to_L1
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: publicnginx
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  artifacts:
                    primary:
                      type: DockerRegistry
                      spec:
                        tag: &lt;+input&gt;
          environment:
            environmentRef: L1
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L1_K8s
          execution:
            steps:
              - stepGroup:
                  name: Canary Deployment
                  identifier: canaryDepoyment
                  steps:
                    - step:
                        name: Canary Deployment
                        identifier: canaryDeployment
                        type: K8sCanaryDeploy
                        timeout: 10m
                        spec:
                          instanceSelection:
                            type: Count
                            spec:
                              count: 1
                          skipDryRun: false
                    - step:
                        name: Canary Delete
                        identifier: canaryDelete
                        type: K8sCanaryDelete
                        timeout: 10m
                        spec: {}
              - stepGroup:
                  name: Primary Deployment
                  identifier: primaryDepoyment
                  steps:
                    - step:
                        name: Rolling Deployment
                        identifier: rollingDeployment
                        type: K8sRollingDeploy
                        timeout: 10m
                        spec:
                          skipDryRun: false
              - step:
                  type: HarnessApproval
                  name: Cleanup Demo
                  identifier: Cleanup_Demo
                  spec:
                    approvalMessage: Please review the following information and approve the pipeline progression
                    includePipelineExecutionHistory: true
                    approvers:
                      userGroups:
                        - account.ProductManagement
                      minimumCount: 1
                      disallowPipelineExecutor: false
                    approverInputs: []
                  timeout: 1d
              - step:
                  name: Cleanup Cluster
                  identifier: Cleanup_Cluster
                  template:
                    templateRef: Cleanup_Demo
                    versionLabel: 0.0.1
            rollbackSteps:
              - step:
                  name: Canary Delete
                  identifier: rollbackCanaryDelete
                  type: K8sCanaryDelete
                  timeout: 10m
                  spec: {}
              - step:
                  name: Rolling Rollback
                  identifier: rollingRollback
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
  variables:
    - name: branch
      type: String
      default: main
      value: &lt;+input&gt;.allowedValues(main,dev,qa)
    - name: serviceName
      type: String
      description: ""
      value: public-nginx
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Harness_Pipeline_Template.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-27">View</button>
        <dialog id="modal-27" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Harness Pipeline Template
  identifier: Harness_Pipeline_Template
  tags: {}
  template:
    templateRef: account.Kubernetes_Canary_Deployment_1
    versionLabel: "1.0"
    templateInputs:
      stages:
        - stage:
            identifier: Canary_Deployment
            template:
              templateInputs:
                type: Deployment
                spec:
                  service:
                    serviceRef: &lt;+input&gt;
                    serviceInputs: &lt;+input&gt;
                  environment:
                    infrastructureDefinitions:
                      - identifier: k8sdev1
                        inputs:
                          identifier: k8sdev1
                          type: KubernetesDirect
                          spec:
                            connectorRef: &lt;+input&gt;
                            namespace: &lt;+input&gt;
                variables:
                  - name: teamName
                    type: String
                    value: &lt;+input&gt;.allowedValues(deployment,pipeline,platform,ci,ffm)
        - stage:
            identifier: Deploy_Prod
            type: Deployment
            spec:
              environment:
                environmentRef: &lt;+input&gt;
                environmentInputs: &lt;+input&gt;
                serviceOverrideInputs: &lt;+input&gt;
                infrastructureDefinitions: &lt;+input&gt;
      variables:
        - name: skip
          type: String
          value: &lt;+input&gt;.default(false).allowedValues(false,true)
        - name: deploySecret
          type: Secret
          value: &lt;+input&gt;
  projectIdentifier: PM_Signoff
  orgIdentifier: default
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Joe.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-28">View</button>
        <dialog id="modal-28" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Joe
  identifier: Joe
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: deploy
        identifier: deploy
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          environmentGroup:
            envGroupRef: dev
            metadata:
              parallel: &lt;+input&gt;
            deployToAll: false
            environments:
              - environmentRef: ecs
                deployToAll: true
                infrastructureDefinitions: &lt;+input&gt;
              - environmentRef: k8sdev
                deployToAll: false
                infrastructureDefinitions:
                  - identifier: eks
                    inputs:
                      identifier: eks
                      type: KubernetesAws
                      spec:
                        connectorRef: &lt;+input&gt;
                        cluster: &lt;+input&gt;
                        namespace: &lt;+input&gt;
                        releaseName: &lt;+input&gt;
                        region: &lt;+input&gt;
                      allowSimultaneousDeployments: &lt;+input&gt;
                  - identifier: devrancher1
                    inputs:
                      identifier: devrancher1
                      type: KubernetesRancher
                      spec:
                        connectorRef: &lt;+input&gt;
                        cluster: &lt;+input&gt;
                        namespace: &lt;+input&gt;
                  - identifier: oicdaws
                    inputs:
                      identifier: oicdaws
                      type: KubernetesAws
                      spec:
                        provisioner: &lt;+input&gt;
                  - identifier: qa
          execution:
            steps:
              - step:
                  type: K8sRollingDeploy
                  name: K8sRollingDeploy_1
                  identifier: K8sRollingDeploy_1
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
                  timeout: 10m
            rollbackSteps: []
        tags: {}
        when:
          pipelineStatus: Success
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
  variables:
    - name: name
      type: String
      description: a persons name
      required: false
      value: &lt;+input&gt;.default(test)
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Kubernetes_Canary.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-29">View</button>
        <dialog id="modal-29" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Kubernetes Canary
  identifier: Kubernetes_Canary
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Canary Deployment
        identifier: Canary_Deployment
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: K8s
          execution:
            steps:
              - stepGroup:
                  name: Canary Deployment
                  identifier: canaryDepoyment
                  steps:
                    - step:
                        name: Canary Deployment
                        identifier: canaryDeployment
                        type: K8sCanaryDeploy
                        timeout: 10m
                        spec:
                          instanceSelection:
                            type: Count
                            spec:
                              count: 1
                          skipDryRun: true
                    - step:
                        name: Canary Delete
                        identifier: canaryDelete
                        type: K8sCanaryDelete
                        timeout: 10m
                        spec: {}
              - stepGroup:
                  name: Primary Deployment
                  identifier: primaryDepoyment
                  steps:
                    - step:
                        name: Rolling Deployment
                        identifier: rollingDeployment
                        type: K8sRollingDeploy
                        timeout: 10m
                        spec:
                          skipDryRun: true
                          pruningEnabled: false
                          commandFlags: []
                        failureStrategies: []
            rollbackSteps:
              - step:
                  name: Canary Delete
                  identifier: rollbackCanaryDelete
                  type: K8sCanaryDelete
                  timeout: 10m
                  spec: {}
              - step:
                  name: Rolling Rollback
                  identifier: rollingRollback
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
          environment:
            environmentRef: staging
            deployToAll: false
            infrastructureDefinitions:
              - identifier: productstaging
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Kubernetes_Rolling_Deploy_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-30">View</button>
        <dialog id="modal-30" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Kubernetes Rolling Deploy
  identifier: Kubernetes_Rolling_Deploy
  versionLabel: "1.0"
  type: Step
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  spec:
    type: K8sRollingDeploy
    timeout: 10m
    spec:
      skipDryRun: false
      pruningEnabled: false
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/L3_Parameters.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-31">View</button>
        <dialog id="modal-31" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "L3_Parameters"
  pipeline:
    identifier: "Kubernetes_Rolling_Pipeline"
    stages:
    - stage:
        identifier: "Deploy_to_L3"
        type: "Deployment"
        spec:
          serviceConfig:
            serviceDefinition:
              type: "Kubernetes"
              spec:
                artifacts:
                  primary:
                    type: "DockerRegistry"
                    spec:
                      tag: "stable-perl"
  name: "L3 Parameters"
  orgIdentifier: "Product_Management_Design"
  projectIdentifier: "Continuous_Deployment_Product_Team"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/New_York.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-32">View</button>
        <dialog id="modal-32" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: New York
  identifier: New_York
  template:
    templateRef: End_2_End_Pipeline_Template
    versionLabel: 0.0.1
    templateInputs:
      stages:
        - stage:
            identifier: Dev
            type: Deployment
            spec:
              service:
                serviceRef: &lt;+input&gt;
                serviceInputs: &lt;+input&gt;
  tags: {}
  projectIdentifier: Rohan
  orgIdentifier: default
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Org_Deploy_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-33">View</button>
        <dialog id="modal-33" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Org Deploy
  identifier: Org_Deploy
  versionLabel: "1.0"
  type: Stage
  orgIdentifier: default
  tags: {}
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: false
          - step:
              type: K8sApply
              name: Apply DB Migration Job
              identifier: Apply_DB_Migration_Job
              spec:
                filePaths:
                  - database-migration.yaml
                skipDryRun: false
                skipSteadyStateCheck: true
                skipRendering: false
                overrides:
                  - manifest:
                      identifier: DBValues
                      type: Values
                      spec:
                        store:
                          type: Github
                          spec:
                            connectorRef: account.ThisRohanGupta
                            gitFetchType: Branch
                            paths:
                              - migration-values.yaml
                            repoName: Product-Management
                            branch: ",ain"
              timeout: 10m
              failureStrategies:
                - onFailure:
                    errors:
                      - AllErrors
                    action:
                      type: Retry
                      spec:
                        retryCount: 3
                        retryIntervals:
                          - 2s
                        onRetryFailure:
                          action:
                            type: StageRollback
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
    when:
      pipelineStatus: All
      condition: &lt;+input&gt;
    delegateSelectors: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-34">View</button>
        <dialog id="modal-34" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Pipeline
  identifier: Pipeline
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  properties:
    ci:
      codebase:
        connectorRef: ThisRohanGupta
        repoName: Product-Management
        build: &lt;+input&gt;
  stages:
    - stage:
        name: Build
        identifier: Build
        description: ""
        type: CI
        spec:
          cloneCodebase: true
          infrastructure:
            type: KubernetesDirect
            spec:
              connectorRef: k8s
              namespace: dev
              automountServiceAccountToken: true
              nodeSelector: {}
              os: Linux
          execution:
            steps:
              - step:
                  name: publish image
                  identifier: publishImage
                  template:
                    templateRef: publish_image
                    versionLabel: "1.0"
                    gitBranch: main
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Pipeline_service.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-35">View</button>
        <dialog id="modal-35" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Pipeline service
  identifier: Pipeline_service
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy
        identifier: Deploy
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: pipelinenginx
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: &lt;+input&gt;
                      sources: &lt;+input&gt;
          environment:
            environmentRef: staging
            deployToAll: false
            infrastructureDefinitions:
              - identifier: productstaging
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: Shell Script
                  identifier: Shell_Script
                  spec:
                    shell: Bash
                    onDelegate: true
                    source:
                      type: Inline
                      spec:
                        script: &lt;+service.name&gt;
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Rohan_Template.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-36">View</button>
        <dialog id="modal-36" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Rohan Template
    identifier: Rohan_Template
    versionLabel: 0.0.1
    type: Step
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    description: null
    tags: {}
    spec:
        type: ShellScript
        timeout: 10m
        spec:
            shell: Bash
            onDelegate: true
            source:
                type: Inline
                spec:
                    script: |-
                        echo "Hello World"

                        echo "This is Harness to Git"
                        
                        echo "This is Git to Harness, Hi Archit!"
            environmentVariables: []
            outputVariables: []
            executionTarget: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Rohan_Template_Version2.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-37">View</button>
        <dialog id="modal-37" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Rohan Template
    identifier: Rohan_Template
    versionLabel: Version2.0
    type: Step
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    description: null
    tags: {}
    spec:
        type: ShellScript
        timeout: 10m
        spec:
            shell: Bash
            onDelegate: true
            source:
                type: Inline
                spec:
                    script: |
                        echo "Hello World"

                        echo "This is Harness to Git"

                        echo "This is Git to Harness, Hi Archit!"

                        echo &lt;+pipeline.name&gt;
            environmentVariables: []
            outputVariables: []
            executionTarget: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Rolling_Deploy_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-38">View</button>
        <dialog id="modal-38" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Rolling Deploy
  identifier: Rolling_Deploy
  versionLabel: "1.0"
  type: Step
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  spec:
    type: K8sRollingDeploy
    timeout: &lt;+input&gt;
    spec:
      skipDryRun: false
      pruningEnabled: false
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Rolling_Deploy_2.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-39">View</button>
        <dialog id="modal-39" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Rolling Deploy
  identifier: Rolling_Deploy
  type: Step
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  spec:
    type: K8sRollingDeploy
    timeout: &lt;+input&gt;
    spec:
      skipDryRun: false
      pruningEnabled: true
  versionLabel: "2.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/SampleDemo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-40">View</button>
        <dialog id="modal-40" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  pipeline:
    identifier: CDNG_Demo_Pipeline
    stages:
      - stage:
          identifier: Deploy_to_Dev
          type: Deployment
          spec:
            service:
              serviceInputs:
                serviceDefinition:
                  type: Kubernetes
                  spec:
                    artifacts:
                      primary:
                        primaryArtifactRef: dev
                        sources:
                          - identifier: dev
                            type: DockerRegistry
                            spec:
                              tag: stable-perl
  name: SampleDemo
  identifier: SampleDemo
  orgIdentifier: default
  projectIdentifier: Rohan
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Script_Stage_001.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-41">View</button>
        <dialog id="modal-41" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Script Stage
    identifier: Script_Stage
    versionLabel: 0.0.1
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: helloworld
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
            infrastructure:
                environmentRef: development
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: gkeautopilot
                        namespace: dev
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: ShellScript
                          name: Sehll Job
                          identifier: Sehll_Job
                          spec:
                              shell: Bash
                              onDelegate: true
                              source:
                                  type: Inline
                                  spec:
                                      script: echo "Shell"
                              environmentVariables: []
                              outputVariables: []
                              executionTarget: {}
                          timeout: 10m
                rollbackSteps: []
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Sony_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-42">View</button>
        <dialog id="modal-42" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Sony Pipeline
  identifier: Sony_Pipeline
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  notificationRules:
    - name: Job Start Pipeline Notification
      identifier: Job_Start_Pipeline_Notification
      pipelineEvents:
        - type: PipelineStart
      notificationMethod:
        type: Slack
        spec:
          userGroups:
            - account._account_all_users
          webhookUrl: ""
      enabled: true
  stages:
    - stage:
        name: Check Qualys Maintenance
        identifier: Check_Qualys_Maintenance
        description: ""
        type: Custom
        spec:
          execution:
            steps:
              - stepGroup:
                  name: Check Qualys maintenance
                  identifier: Check_Qualys_maintenance
                  steps:
                    - step:
                        type: GitClone
                        name: Clone Python Script
                        identifier: Clone_Python_Script
                        spec:
                          connectorRef: ThisRohanGupta
                          repoName: PRoduct-Management
                          cloneDirectory: /infrastructure/
                          build:
                            type: branch
                            spec:
                              branch: main
                        description: Cloning
                  stepGroupInfra:
                    type: KubernetesDirect
                    spec:
                      connectorRef: account.Harness_Kubernetes_Cluster
                      namespace: build
            rollbackSteps: []
          serviceDependencies: []
        tags: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Sony_Pipeline_Clone.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-43">View</button>
        <dialog id="modal-43" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">---
pipeline:
  projectIdentifier: "PM_Signoff"
  orgIdentifier: "default"
  tags: {}
  notificationRules:
  - name: "Job Start Pipeline Notification"
    identifier: "Job_Start_Pipeline_Notification"
    pipelineEvents:
    - type: "PipelineStart"
    notificationMethod:
      type: "Slack"
      spec:
        userGroups:
        - "account._account_all_users"
        webhookUrl: ""
    enabled: true
  stages:
  - stage:
      name: "Check Qualys Maintenance"
      identifier: "Check_Qualys_Maintenance"
      description: ""
      type: "Custom"
      spec:
        execution:
          steps:
          - stepGroup:
              name: "Check Qualys maintenance"
              identifier: "Check_Qualys_maintenance"
              steps:
              - step:
                  type: "GitClone"
                  name: "Clone Python Script"
                  identifier: "Clone_Python_Script"
                  spec:
                    connectorRef: "ThisRohanGupta"
                    repoName: "PRoduct-Management"
                    cloneDirectory: "/infrastructure/"
                    build:
                      type: "branch"
                      spec:
                        branch: "main"
                  description: "Cloning"
              stepGroupInfra:
                type: "KubernetesDirect"
                spec:
                  connectorRef: "account.Harness_Kubernetes_Cluster"
                  namespace: "build"
          rollbackSteps: []
        serviceDependencies: []
      tags: {}
  identifier: "Sony_Pipeline_Clone"
  name: "Sony Pipeline - Clone"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Stage/Deploy_1.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-44">View</button>
        <dialog id="modal-44" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Deploy
  identifier: Deploy
  versionLabel: "1.0"
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: true
          - step:
              type: ShellScript
              name: Shell Script
              identifier: ShellScript
              spec:
                shell: Bash
                onDelegate: true
                source:
                  type: Inline
                  spec:
                    script: kubectl get pods -n &lt;+infra.namespace&gt;
                environmentVariables: []
                outputVariables: []
              timeout: 10m
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Step_Group_Template_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-45">View</button>
        <dialog id="modal-45" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Step Group Template
  identifier: Step_Group_Template
  versionLabel: "1.0"
  type: StepGroup
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  spec:
    stageType: Deployment
    steps:
      - step:
          type: ShellScript
          name: hello
          identifier: hello
          spec:
            shell: Bash
            onDelegate: true
            source:
              type: Inline
              spec:
                script: echo "Hello"
            environmentVariables: []
            outputVariables: []
          timeout: 10m
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Template/Multi_Environment_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-46">View</button>
        <dialog id="modal-46" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Multi Environment
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: false
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
      environments:
        metadata:
          parallel: true
        values:
          - environmentRef: L1
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L1
          - environmentRef: L2
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L2_K8s
          - environmentRef: L3
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L3_Default_K8s
          - environmentRef: WellsFargo
            deployToAll: false
            infrastructureDefinitions:
              - identifier: devk8s
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
  identifier: Multi_Environment
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Test_100.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-47">View</button>
        <dialog id="modal-47" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Test
    identifier: Test
    versionLabel: 1.0.0
    type: Stage
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    tags: {}
    spec:
        type: CI
        spec:
            cloneCodebase: true
            infrastructure:
                type: KubernetesDirect
                spec:
                    connectorRef: rohan_product_cluster
                    namespace: dev
                    automountServiceAccountToken: true
            execution:
                steps:
                    - step:
                          type: BuildAndPushDockerRegistry
                          name: Havan
                          identifier: Havan
                          spec:
                              connectorRef: public_dockerhub
                              repo: &lt;+service.name&gt;-&lt;+env.name&gt;
                              tags:
                                  - dev
                                  - qa
                                  - prod
                              optimize: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Test_102.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-48">View</button>
        <dialog id="modal-48" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: Test
    identifier: Test
    versionLabel: 1.0.2
    type: Stage
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    tags: {}
    spec:
        type: CI
        spec:
            cloneCodebase: true
            infrastructure:
                type: KubernetesDirect
                spec:
                    connectorRef: rohan_product_cluster
                    namespace: dev
                    automountServiceAccountToken: true
            execution:
                steps:
                    - step:
                          type: BuildAndPushDockerRegistry
                          name: Havan
                          identifier: Havan
                          spec:
                              connectorRef: dockerhub
                              repo: &lt;+service.name&gt;-&lt;+env.name&gt;
                              tags:
                                  - dev
                              optimize: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/ThisRohanGupta_Repo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-49">View</button>
        <dialog id="modal-49" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: ThisRohanGupta Repo
  identifier: ThisRohanGupta_Repo
  description:
  orgIdentifier: Product_Management_Design
  projectIdentifier: Continuous_Deployment_Product_Team
  type: Github
  spec:
    url: https://github.com/ThisRohanGupta/Product-Management.git
    authentication:
      type: Http
      spec:
        type: UsernameToken
        spec:
          username: ThisRohanGupta
          tokenRef: account.ThisRohanGupta_PAT
    type: Repo
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Thisrohanvivun.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-50">View</button>
        <dialog id="modal-50" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: Thisrohanvivun
  identifier: Thisrohanvivun
  description:
  orgIdentifier: default
  projectIdentifier: CD_Product_Team
  type: Github
  spec:
    url: https://github.com/thisrohangupta/Product-Management.git
    authentication:
      type: Http
      spec:
        type: UsernameToken
        spec:
          username: ThisRohanGupta
          tokenRef: Rohan_Personal_Access_Token
    apiAccess:
      type: Token
      spec:
        tokenRef: Rohan_Personal_Access_Token
    executeOnDelegate: false
    type: Repo
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/Utility.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-51">View</button>
        <dialog id="modal-51" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Utility
  identifier: Utility
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: PRE-PROCESS
        identifier: PREPROCESS
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: kubernetes
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: &lt;+input&gt;
                      sources: &lt;+input&gt;
          environment:
            environmentRef: dev
            deployToAll: false
            infrastructureDefinitions:
              - identifier: devk8s
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: PRE-PROCESS
                  identifier: PREPROCESS
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: echo "sa"
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
            rollbackSteps: []
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
    - stage:
        name: golden
        identifier: golden
        description: ""
        type: Pipeline
        spec:
          org: default
          pipeline: Golden
          project: PM_Signoff
          inputs:
            identifier: Golden
            stages:
              - stage:
                  identifier: Dev
                  type: Deployment
                  spec:
                    service:
                      serviceRef: kubernetes
                      serviceInputs:
                        serviceDefinition:
                          type: Kubernetes
                          spec:
                            artifacts:
                              primary:
                                primaryArtifactRef: ""
                                sources: &lt;+input&gt;
    - stage:
        name: non prod
        identifier: any_env
        description: ""
        type: Pipeline
        spec:
          org: default
          pipeline: prod
          project: PM_Signoff
          inputs:
            identifier: prod
            stages:
              - stage:
                  identifier: prod_only
                  type: Deployment
                  spec:
                    service:
                      serviceRef: &lt;+input&gt;
                      serviceInputs: &lt;+input&gt;
                    environment:
                      environmentRef: &lt;+input&gt;
                      environmentInputs: &lt;+input&gt;
                      serviceOverrideInputs: &lt;+input&gt;
                      infrastructureDefinitions: &lt;+input&gt;
        tags: {}
    - stage:
        name: prod-only
        identifier: prodonly
        description: ""
        type: Pipeline
        spec:
          org: default
          pipeline: prod
          project: PM_Signoff
          inputs:
            identifier: prod
            stages:
              - stage:
                  identifier: prod_only
                  type: Deployment
                  spec:
                    service:
                      serviceRef: &lt;+input&gt;
                      serviceInputs: &lt;+input&gt;
                    environment:
                      environmentRef: &lt;+input&gt;
                      environmentInputs: &lt;+input&gt;
                      serviceOverrideInputs: &lt;+input&gt;
                      infrastructureDefinitions: &lt;+input&gt;
  allowStageExecutions: true
  variables:
    - name: RELEASE-TYPE
      type: String
      description: ""
      required: false
      value: &lt;+input&gt;.allowedValues(BIG-BANG,BOTH,BG)
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/cko.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-52">View</button>
        <dialog id="modal-52" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: cko
  identifier: cko
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: cd
        identifier: cd
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          gitOpsEnabled: true
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          execution:
            steps:
              - step:
                  type: GitOpsUpdateReleaseRepo
                  name: Update Release Repo
                  identifier: updateReleaseRepo
                  timeout: 10m
                  spec: {}
              - step:
                  type: MergePR
                  name: Merge PR
                  identifier: mergePR
                  spec:
                    deleteSourceBranch: true
                  timeout: 10m
              - step:
                  type: GitOpsFetchLinkedApps
                  name: Fetch Linked Apps
                  identifier: fetchLinkedApps
                  timeout: 10m
                  spec: {}
              - step:
                  type: GitOpsGetAppDetails
                  name: GitOpsGetAppDetails_1
                  identifier: GitOpsGetAppDetails_1
                  spec:
                    hardRefresh: false
                    applicationRegex: &lt;+input&gt;
                  timeout: 10m
              - step:
                  type: GitOpsSync
                  name: GitOpsSync_1
                  identifier: GitOpsSync_1
                  spec:
                    prune: true
                    dryRun: true
                    applyOnly: true
                    forceApply: true
                    applicationsList: []
                    retryStrategy:
                      limit: 2
                      baseBackoffDuration: 5s
                      increaseBackoffByFactor: 2
                      maxBackoffDuration: 3m5s
                    retry: true
                    syncOptions:
                      skipSchemaValidation: true
                      autoCreateNamespace: true
                      pruneResourcesAtLast: false
                      applyOutOfSyncOnly: true
                      replaceResources: true
                      prunePropagationPolicy: foreground
                    showResourceProgress: true
                  timeout: 10m
              - step:
                  type: RevertPR
                  name: RevertPR_1
                  identifier: RevertPR_1
                  spec:
                    commitId: 1341daq3
                    disableGitRestraint: &lt;+input&gt;
                    prTitle: &lt;+input&gt;
                  timeout: 10m
              - step:
                  type: UpdateGitOpsApp
                  name: UpdateGitOpsApp_1
                  identifier: UpdateGitOpsApp_1
                  spec:
                    applicationName: &lt;+input&gt;
                    agentId: &lt;+input&gt;
                    targetRevision: &lt;+input&gt;
                    helm: &lt;+input&gt;
                    kustomize: &lt;+input&gt;
                  timeout: 10m
            rollbackSteps: []
          environment:
            environmentRef: &lt;+input&gt;
            deployToAll: &lt;+input&gt;
            environmentInputs: &lt;+input&gt;
            gitOpsClusters: &lt;+input&gt;
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/cloud_run.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-53">View</button>
        <dialog id="modal-53" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: cloud run
  identifier: cloud_run
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  serviceDefinition:
    spec:
      environmentType: GenTwo
      manifests:
        - manifest:
            identifier: dev
            type: GoogleCloudFunctionDefinition
            spec:
              store:
                type: Harness
                spec:
                  files:
                    - /cloudrun.yaml
      artifacts:
        primary:
          primaryArtifactRef: &lt;+input&gt;
          sources:
            - spec:
                connectorRef: &lt;+input&gt;
                project: &lt;+input&gt;
                bucket: &lt;+input&gt;
                artifactPath: &lt;+input&gt;
              identifier: devrun
              type: GoogleCloudStorage
    type: GoogleCloudFunctions
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/demo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-54">View</button>
        <dialog id="modal-54" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "demo"
  pipeline:
    identifier: "Kubernetes_Canary_Pipeline_Demo"
    stages:
    - stage:
        identifier: "Deploy_to_Dev"
        type: "Deployment"
        spec:
          serviceConfig:
            serviceDefinition:
              type: "Kubernetes"
              spec:
                manifests:
                - manifest:
                    identifier: "dev_manifest"
                    type: "K8sManifest"
                    spec:
                      store:
                        type: "Github"
                        spec:
                          branch: "main"
                artifacts:
                  primary:
                    type: "DockerRegistry"
                    spec:
                      tag: "stable-perl"
  name: "demo"
  tags:
    status: "active"
    owner: "rohan"
  orgIdentifier: "Product_Management_Design"
  projectIdentifier: "Continuous_Deployment_Product_Team"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/demo1_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-55">View</button>
        <dialog id="modal-55" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: demo1
  type: Stage
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: kubernetes
        serviceInputs:
          serviceDefinition:
            type: Kubernetes
            spec:
              manifests:
                - manifest:
                    identifier: k8s_example
                    type: K8sManifest
                    spec:
                      store:
                        type: Github
                        spec:
                          connectorRef: &lt;+input&gt;
              artifacts:
                primary:
                  primaryArtifactRef: &lt;+input&gt;
                  sources: &lt;+input&gt;
              variables:
                - name: token
                  type: String
                  value: &lt;+input&gt;
                - name: password
                  type: Secret
                  value: &lt;+input&gt;
                - name: cpu
                  type: Number
                  value: &lt;+input&gt;
      execution:
        steps:
          - step:
              type: ShellScript
              name: ShellScript_1
              identifier: ShellScript_1
              spec:
                shell: Bash
                executionTarget: {}
                source:
                  type: Inline
                  spec:
                    script: |+
                      echo "connector name" &lt;+infra.connector.name&gt;

                      echo "deployment type" &lt;+stage.spec.deploymentType&gt;

                environmentVariables: []
                outputVariables: []
              timeout: 10m
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
      environment:
        environmentRef: k8sprod
        deployToAll: false
        infrastructureDefinitions:
          - identifier: prod
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
  identifier: demo1
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/demo_template_v3.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-56">View</button>
        <dialog id="modal-56" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: demo template
    identifier: demo_template
    versionLabel: v3
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        description: ""
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: &lt;+input&gt;
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
                        artifacts:
                            primary:
                                spec:
                                    connectorRef: &lt;+input&gt;
                                    imagePath: &lt;+input&gt;
                                    tag: &lt;+input&gt;
                                type: DockerRegistry
            infrastructure:
                environmentRef: &lt;+input&gt;
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: &lt;+input&gt;
                        namespace: &lt;+input&gt;
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: Http
                          name: test
                          identifier: test
                          spec:
                              url: https://google.com
                              method: GET
                              headers: []
                              outputVariables: []
                          timeout: 10s
                rollbackSteps: []
        tags: {}
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/dev-env.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-57">View</button>
        <dialog id="modal-57" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">environment:
  name: dev
  identifier: dev
  description: ""
  tags: {}
  type: PreProduction
  orgIdentifier: default
  projectIdentifier: PM_Signoff
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/dev.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-58">View</button>
        <dialog id="modal-58" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  name: dev
  identifier: dev
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  pipeline:
    identifier: sony
    stages:
      - stage:
          identifier: Deploy
          type: Deployment
          spec:
            service:
              serviceInputs:
                serviceDefinition:
                  type: NativeHelm
                  spec:
                    artifacts:
                      primary:
                        primaryArtifactRef: nginx
                        sources:
                          - identifier: nginx
                            type: DockerRegistry
                            spec:
                              tag: &lt;+input&gt;.executionInput()
    properties:
      ci:
        codebase:
          build: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/devcdpipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-59">View</button>
        <dialog id="modal-59" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "devcdpipeline"
  pipeline:
    identifier: "cddeployment"
    stages:
    - stage:
        identifier: "Deploy"
        type: "Deployment"
        spec:
          serviceConfig:
            serviceDefinition:
              type: "Kubernetes"
              spec:
                manifests:
                - manifest:
                    identifier: "dev"
                    type: "K8sManifest"
                    spec:
                      store:
                        type: "Github"
                        spec:
                          branch: "main"
                artifacts:
                  primary:
                    type: "DockerRegistry"
                    spec:
                      tag: "stable-perl"
          infrastructure:
            environmentRef: "development"
  name: "dev-cdpipeline"
  orgIdentifier: "Product_Management_Design"
  projectIdentifier: "Continuous_Deployment_Product_Team"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/email.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-60">View</button>
        <dialog id="modal-60" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: email
  identifier: email
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: email
        identifier: email
        description: ""
        type: Custom
        spec:
          execution:
            steps:
              - step:
                  type: Email
                  name: Email_1
                  identifier: Email_1
                  spec:
                    to: nofar@harness.io
                    cc: rohan@harness.io
                    subject: Happy Friday from Harness!
                    body: Pipeline Execution &lt;+pipeline.name&gt;
                  timeout: 10m
        tags: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/environments/staging/serviceOverrides.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-61">View</button>
        <dialog id="modal-61" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">serviceOverrides:
  environmentRef: staging
  serviceRef: SSH
  variables:
    - name: DB_URL
      type: String
      value: qa.harness.io
  manifests: []
  configFiles: []
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/environments/staging/staging-infra.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-62">View</button>
        <dialog id="modal-62" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">infrastructureDefinition:
  name: prod2
  identifier: prod2
  description: ""
  tags: {}
  orgIdentifier: default
  projectIdentifier: Rohan
  environmentRef: staging
  deploymentType: Kubernetes
  type: KubernetesDirect
  spec:
    connectorRef: Kubernetes_Demo
    namespace: dev
    releaseName: release-&lt;+INFRA_KEY&gt;
  allowSimultaneousDeployments: false
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/environments/staging/staging.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-63">View</button>
        <dialog id="modal-63" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">environment:
  name: staging
  identifier: staging
  tags:
    environment: staging
    status: non-regulated
  type: PreProduction
  orgIdentifier: default
  projectIdentifier: Rohan
  variables:
    - name: db_host
      type: String
      value: postgres-staging
    - name: DB_PASS_STAGING
      type: Secret
      value: Rohan_QA
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/gcf.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-64">View</button>
        <dialog id="modal-64" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: gcf
  identifier: gcf
  orgIdentifier: default
  projectIdentifier: PM_Signoff
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/gcf2.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-65">View</button>
        <dialog id="modal-65" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: gcf2
  identifier: gcf2
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  serviceDefinition:
    spec:
      manifests:
        - manifest:
            identifier: ProductManagement
            type: AwsSamDirectory
            spec:
              store:
                type: Github
                spec:
                  connectorRef: &lt;+input&gt;
                  gitFetchType: Branch
                  paths:
                    - /cd/azure/dev.zip
                  repoName: Azure-Function
                  branch: main
    type: AWS_SAM
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/gkeautopilot.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-66">View</button>
        <dialog id="modal-66" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: gke-autopilot
  identifier: gkeautopilot
  description:
  orgIdentifier: Product_Management_Design
  projectIdentifier: Continuous_Deployment_Product_Team
  type: K8sCluster
  spec:
    credential:
      type: InheritFromDelegate
    delegateSelectors:
    - rohan-cd-product
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/helm-k8s-test.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-67">View</button>
        <dialog id="modal-67" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "helmk8stest"
  pipeline:
    identifier: "K8s_Helm_CD_Pipeline"
    stages:
    - stage:
        identifier: "Redis"
        type: "Deployment"
        spec:
          service:
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "rc-buster"
    variables:
    - name: "releaseName"
      type: "String"
      value: "&lt;+service.name&gt;"
  name: "helm-k8s-test"
  orgIdentifier: "default"
  projectIdentifier: "Rohan"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/helm3.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-68">View</button>
        <dialog id="modal-68" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: unified
  identifier: unified
  orgIdentifier: default
  projectIdentifier: PM_Signoff
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/inputset/Deploy_Nginx.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-69">View</button>
        <dialog id="modal-69" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "Deploy_Nginx"
  name: "Deploy Nginx"
  tags: {}
  orgIdentifier: "default"
  projectIdentifier: "Rohan"
  pipeline:
    identifier: "Harness_Demo"
    stages:
    - stage:
        identifier: "Deploy_to_L3"
        type: "Deployment"
        spec:
          service:
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "stable-perl"
    - stage:
        identifier: "Deploy_to_L2"
        type: "Deployment"
        spec:
          service:
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "stable-perl"
    - stage:
        identifier: "Deploy_to_L1"
        type: "Deployment"
        spec:
          service:
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "stable-perl"
    variables:
    - name: "branch"
      type: "String"
      value: "main"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/inputset1.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-70">View</button>
        <dialog id="modal-70" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "inputset1"
  pipeline:
    identifier: "CDNG_Demo_Pipeline"
    stages:
    - stage:
        identifier: "Deploy_to_Dev"
        type: "Deployment"
        spec:
          service:
            serviceRef: "nginxcanary"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: "nginx"
                      sources:
                      - identifier: "nginx"
                        type: "DockerRegistry"
                        spec:
                          tag: "stable-perl"
          environment:
            environmentRef: "staging"
            infrastructureDefinitions:
            - identifier: "productstaging"
    - stage:
        identifier: "Deploy_to_Prod"
        template:
          templateInputs:
            type: "Deployment"
            spec:
              service:
                serviceInputs:
                  serviceDefinition:
                    type: "Kubernetes"
                    spec:
                      artifacts:
                        primary:
                          primaryArtifactRef: "nginx"
                          sources:
                          - identifier: "nginx"
                            type: "DockerRegistry"
                            spec:
                              tag: "stable-perl"
              environment:
                environmentRef: "staging"
                infrastructureDefinitions:
                - identifier: "productstaging"
            when:
              condition: ""
  name: "inputset1"
  orgIdentifier: "default"
  projectIdentifier: "Rohan"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/k8s.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-71">View</button>
        <dialog id="modal-71" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: k8s
  identifier: k8s
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  serviceDefinition:
    spec:
      artifacts:
        primary: {}
      manifests:
        - manifest:
            identifier: nginx
            type: K8sManifest
            spec:
              store:
                type: Github
                spec:
                  connectorRef: ThisRohanGupta
                  gitFetchType: Branch
                  paths:
                    - cdng/
                  repoName: Product-Management
                  branch: main
              skipResourceVersioning: false
              enableDeclarativeRollback: false
    type: Kubernetes
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/k8s_cluster.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-72">View</button>
        <dialog id="modal-72" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: k8s cluster
  identifier: k8s_cluster
  description:
  orgIdentifier: default
  projectIdentifier: git_experience
  type: K8sCluster
  spec:
    credential:
      type: InheritFromDelegate
    delegateSelectors:
    - product-account
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/nab.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-73">View</button>
        <dialog id="modal-73" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "nab"
  pipeline:
    identifier: "cddeployment"
    stages:
    - stage:
        identifier: "CD_Deploy"
        type: "Deployment"
        spec:
          serviceConfig:
            serviceDefinition:
              type: "Kubernetes"
              spec:
                variables:
                - name: "nab_variable"
                  type: "Number"
                  value: 3
                artifacts:
                  primary:
                    type: "DockerRegistry"
                    spec:
                      tag: "stable-perl"
  name: "nab"
  orgIdentifier: "Product_Management_Design"
  projectIdentifier: "Continuous_Deployment_Product_Team"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/new_step_template_name_100.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-74">View</button>
        <dialog id="modal-74" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: New Step Template Name
    identifier: new_step_template_name
    versionLabel: 1.0.0
    type: Step
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    spec:
        type: ShellScript
        spec:
            shell: Bash
            onDelegate: true
            source:
                type: Inline
                spec:
                    script: |+
                        azure cli - az deploy webapp &lt;+service.name&gt; 

            environmentVariables: []
            outputVariables: []
            executionTarget: {}
        timeout: 10m
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/new_step_template_name_101.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-75">View</button>
        <dialog id="modal-75" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: New Step Template Name
    identifier: new_step_template_name
    versionLabel: 1.0.1
    type: Step
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    spec:
        type: ShellScript
        spec:
            shell: Bash
            onDelegate: true
            source:
                type: Inline
                spec:
                    script: "azure webapp rollback &lt;+service.name&gt; "
            environmentVariables: []
            outputVariables: []
            executionTarget: {}
        timeout: 10m
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/non_prod.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-76">View</button>
        <dialog id="modal-76" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags:
    non-prod: ""
  stages:
    - stage:
        name: prod only
        identifier: prod_only
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
          environmentGroup:
            envGroupRef: nonprod
            metadata:
              parallel: false
            deployToAll: &lt;+input&gt;
            environments: &lt;+input&gt;
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
  identifier: non_prod
  name: non prod
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/notificationdevteamA.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-77">View</button>
        <dialog id="modal-77" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">inputSet:
  identifier: "notificationdevteamA"
  name: "notification-dev-teamA"
  tags:
    teamA: ""
    Active: ""
  orgIdentifier: "default"
  projectIdentifier: "CD_Product_Team"
  pipeline:
    identifier: "Forte"
    stages:
    - stage:
        identifier: "Deploy_Service_API"
        type: "Deployment"
        spec:
          serviceConfig:
            serviceRef: "nginx"
            serviceDefinition:
              type: "Kubernetes"
              spec:
                manifests:
                - manifest:
                    identifier: "dev"
                    type: "K8sManifest"
                    spec:
                      store:
                        type: "Github"
                        spec:
                          connectorRef: "Sample_Connector"
                          branch: "main"
          infrastructure:
            environmentRef: "Dev"
    variables:
    - name: "deployment_number"
      type: "String"
      value: "test"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pcfjava.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-78">View</button>
        <dialog id="modal-78" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: pcf-java
  identifier: pcfjava
  orgIdentifier: default
  projectIdentifier: PM_Signoff
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/CD_Deployment_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-79">View</button>
        <dialog id="modal-79" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: "CD Deployment Pipeline"
  identifier: "CD_Deployment_Pipeline"
  projectIdentifier: "Rohan"
  orgIdentifier: "default"
  tags: {}
  stages:
  - stage:
      name: "CD Deploy"
      identifier: "CD_Deploy"
      description: ""
      type: "Deployment"
      spec:
        deploymentType: "Kubernetes"
        environment:
          environmentRef: "staging"
          deployToAll: false
          infrastructureDefinitions:
          - identifier: "productstaging"
        execution:
          steps:
          - step:
              name: "Rollout Deployment"
              identifier: "rolloutDeployment"
              type: "K8sRollingDeploy"
              timeout: "10m"
              spec:
                skipDryRun: false
                pruningEnabled: false
          rollbackSteps:
          - step:
              name: "Rollback Rollout Deployment"
              identifier: "rollbackRolloutDeployment"
              type: "K8sRollingRollback"
              timeout: "10m"
              spec:
                pruningEnabled: false
        services:
          values:
          - serviceRef: "portal"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "&lt;+input&gt;"
          - serviceRef: "bitnami"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  manifests:
                  - manifest:
                      identifier: "dev"
                      type: "HelmChart"
                      spec:
                        chartVersion: "&lt;+input&gt;"
          - serviceRef: "kustomize"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  artifacts:
                    primary:
                      type: "DockerRegistry"
                      spec:
                        tag: "&lt;+input&gt;"
          - serviceRef: "helloworldKustomize"
            serviceInputs:
              serviceDefinition:
                type: "Kubernetes"
                spec:
                  manifests:
                  - manifest:
                      identifier: "helloWorldKustomize"
                      type: "Kustomize"
                      spec:
                        store:
                          type: "Github"
                          spec:
                            branch: "&lt;+input&gt;"
          metadata:
            parallel: false
      tags: {}
      failureStrategies:
      - onFailure:
          errors:
          - "AllErrors"
          action:
            type: "StageRollback"
  - stage:
      name: "Approve to Prod"
      identifier: "Approve_to_Prod"
      description: ""
      type: "Approval"
      spec:
        execution:
          steps:
          - step:
              name: "Approval"
              identifier: "Approval"
              type: "HarnessApproval"
              timeout: "1d"
              spec:
                approvalMessage: "Please review the following information\nand approve\
                  \ the pipeline progression"
                includePipelineExecutionHistory: true
                approvers:
                  minimumCount: 1
                  disallowPipelineExecutor: false
                  userGroups:
                  - "account.ProductManagement"
                approverInputs: []
      tags: {}
  - stage:
      name: "Prod Deploy"
      identifier: "Prod_Deploy"
      description: ""
      type: "Deployment"
      spec:
        deploymentType: "Kubernetes"
        service:
          useFromStage:
            stage: "CD_Deploy"
        environment:
          environmentRef: "staging"
          deployToAll: false
          infrastructureDefinitions:
          - identifier: "productstaging"
        execution:
          steps:
          - stepGroup:
              name: "Canary Deployment"
              identifier: "canaryDepoyment"
              steps:
              - step:
                  name: "Canary Deployment"
                  identifier: "canaryDeployment"
                  type: "K8sCanaryDeploy"
                  timeout: "10m"
                  spec:
                    instanceSelection:
                      type: "Count"
                      spec:
                        count: 1
                    skipDryRun: false
              - step:
                  name: "Canary Delete"
                  identifier: "canaryDelete"
                  type: "K8sCanaryDelete"
                  timeout: "10m"
                  spec: {}
          - stepGroup:
              name: "Primary Deployment"
              identifier: "primaryDepoyment"
              steps:
              - step:
                  name: "Rolling Deployment"
                  identifier: "rollingDeployment"
                  type: "K8sRollingDeploy"
                  timeout: "10m"
                  spec:
                    skipDryRun: false
          rollbackSteps:
          - step:
              name: "Canary Delete"
              identifier: "rollbackCanaryDelete"
              type: "K8sCanaryDelete"
              timeout: "10m"
              spec: {}
          - step:
              name: "Rolling Rollback"
              identifier: "rollingRollback"
              type: "K8sRollingRollback"
              timeout: "10m"
              spec: {}
      tags: {}
      failureStrategies:
      - onFailure:
          errors:
          - "AllErrors"
          action:
            type: "StageRollback"
  - stage:
      name: "test"
      identifier: "test"
      description: ""
      type: "FeatureFlag"
      spec:
        execution:
          steps:
          - step:
              type: "FlagConfiguration"
              name: "test"
              identifier: "test"
              spec:
                feature: "testing"
                environment: "TestCiscoPlusEnv"
                instructions:
                - identifier: "SetDefaultVariationsIdentifier"
                  type: "SetDefaultVariations"
                  spec:
                    "on": "true"
                    "off": "false"
              timeout: "10m"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/Charles.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-80">View</button>
        <dialog id="modal-80" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Charles
  identifier: Charles
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy
        identifier: Deploy
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          execution:
            steps:
              - step:
                  name: Rollout Deployment
                  identifier: rolloutDeployment
                  type: K8sRollingDeploy
                  timeout: 10m
                  spec:
                    skipDryRun: false
                    pruningEnabled: false
            rollbackSteps:
              - step:
                  name: Rollback Rollout Deployment
                  identifier: rollbackRolloutDeployment
                  type: K8sRollingRollback
                  timeout: 10m
                  spec:
                    pruningEnabled: false
          environments:
            metadata:
              parallel: false
            values:
              - environmentRef: staging
                deployToAll: false
                infrastructureDefinitions:
                  - identifier: productstaging
                    inputs:
                      identifier: productstaging
                      type: KubernetesDirect
                      spec:
                        namespace: &lt;+input&gt;.allowedValues(dev,qa,prod)
              - environmentRef: L1
                deployToAll: false
                infrastructureDefinitions:
                  - identifier: L1
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
  allowStageExecutions: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/Charter.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-81">View</button>
        <dialog id="modal-81" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Charter
  identifier: Charter
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: WIN-Release-Primary-validation
        identifier: WINReleasePrimaryvalidation
        description: ""
        type: Deployment
        spec:
          deploymentType: NativeHelm
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          environment:
            environmentRef: &lt;+input&gt;
            deployToAll: false
            environmentInputs: &lt;+input&gt;
            infrastructureDefinitions: &lt;+input&gt;
          execution:
            steps:
              - stepGroup:
                  name: Deploy Containers
                  identifier: Deploy_Containers
                  steps:
                    - step:
                        type: ShellScript
                        name: Set_PrePrimary_Value
                        identifier: Set_PrePrimary_Value
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                PRIMARY_WEIGHT=""
                                CANARY_WEIGHT=""
                                CANARY_DEPLOY_MODE=""

                                env=`echo ${infra.name} | sed -e "s/-canary//g"`

                                enable_canary_deploy="false"

                                if [[  (${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp;  $env == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "true" &amp;&amp;  $env == 'perf') || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "true" &amp;&amp;  $env == 'stage') || ( ${workflow.variables.ENABLE_CANARY_PROD} == "true" &amp;&amp;  $env == 'prod')  ]]; then

                                     enable_canary_deploy="true"
                                fi

                                if [[ $enable_canary_deploy == "true" ]]; then
                                   export PRIMARY_WEIGHT="0"
                                   export CANARY_WEIGHT="100"
                                   export CANARY_DEPLOY_MODE="true"
                                else
                                   export PRIMARY_WEIGHT="100"
                                   export CANARY_WEIGHT="0"
                                   export CANARY_DEPLOY_MODE="false"
                                fi

                                #export PRIMARY_WEIGHT="100"
                                #export CANARY_WEIGHT="0"

                                echo "PRIMARY_WEIGHT Value"
                                echo ${PRIMARY_WEIGHT}

                                echo "CANARY_WEIGHT Value"
                                echo ${CANARY_WEIGHT}

                                echo "CANARY_DEPLOY_MODE Value"
                                echo ${CANARY_DEPLOY_MODE}

                                export INFRA_NAME=`echo ${infra.name} | sed -e "s/-canary//g"`

                                echo "INFRA NAME"
                                echo ${INFRA_NAME}
                          environmentVariables: []
                          outputVariables:
                            - name: CANARY_WEIGHT
                              type: String
                              value: CANARY_WEIGHT
                            - name: PRIMARY_WEIGHT
                              type: String
                              value: PRIMARY_WEIGHT
                            - name: INFRA_NAME
                              type: String
                              value: INFRA_NAME
                            - name: CANARY_DEPLOY_MODE
                              type: String
                              value: CANARY_DEPLOY_MODE
                        timeout: 10m
                    - step:
                        name: Fetch_EWS_Creds
                        identifier: Fetch_EWS_Creds
                        template:
                          templateRef: Fetch_EWS_Creds
                          templateInputs:
                            type: ShellScript
                            when:
                              condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp; ${workflow.variables.INFRA_NAME}!='int' ) || (${workflow.variables.ENABLE_CANARY_INT} == "true" || ${infra.name}!='int')
                    - step:
                        name: "Publish Helm Chart Version "
                        identifier: Publish_Helm_Chart_Version
                        template:
                          templateRef: Publish_Helm_Chart_Version
                          versionLabel: "1.0"
                          templateInputs:
                            type: ShellScript
                            when:
                              condition: ${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp; ${workflow.variables.INFRA_NAME}!='int' ) || (${workflow.variables.ENABLE_CANARY_INT} == "true" || ${infra.name}!='int')
                    - step:
                        name: Pre Validation
                        identifier: Pre_Validation
                        template:
                          templateRef: Pre_validation
                          versionLabel: "1.0"
                          templateInputs:
                            type: ShellScript
                            when:
                              condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                    - step:
                        type: HarnessApproval
                        name: Pre Approval
                        identifier: Pre_Approval
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                        failureStrategies: []
                    - step:
                        name: Helm Deployment
                        identifier: helmDeployment
                        type: HelmDeploy
                        timeout: 10m
                        spec:
                          skipDryRun: false
                    - step:
                        type: HarnessApproval
                        name: Approval for traffic change
                        identifier: Approval_for_traffic_change
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                        failureStrategies: []
                    - step:
                        type: ShellScript
                        name: Set_PostPrimary_Value
                        identifier: Set_PostPrimary_Value
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                                if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                                  echo "Not running in intended delegate of $CLUSTER_NAME"
                                  exit 1
                                fi


                                namespace=${workflow.variables.CANARY_NAMESPACE}

                                primaryweight=100
                                canaryweight=0


                                rm -rf canary-scripts

                                #git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scp/scpdevops/k8s-infrastructure/canary-scripts.git'

                                git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                                cd canary-scripts

                                ./split_traffic.sh "$namespace" $primaryweight $canaryweight
                          environmentVariables: []
                          outputVariables: []
                        timeout: 10m
                        when:
                          stageStatus: Success
                          condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                        failureStrategies: []
                    - step:
                        type: HarnessApproval
                        name: Delete Canary Approval
                        identifier: Delete_Canary_Approval
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                        failureStrategies: []
                    - step:
                        type: ShellScript
                        name: Delete Canary
                        identifier: Delete_Canary
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                                if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                                  echo "Not running in intended delegate of $CLUSTER_NAME"
                                  exit 1
                                fi


                                namespace=${workflow.variables.CANARY_NAMESPACE}

                                rm -rf canary-scripts



                                git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                                cd canary-scripts

                                ./delete_canary_deploy.sh "$namespace" 
                          environmentVariables: []
                          outputVariables: []
                        timeout: 10m
                        when:
                          stageStatus: Success
                          condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                        failureStrategies: []
                    - step:
                        name: PostValidation
                        identifier: PostValidation
                        template:
                          templateRef: Post_Validation
                          versionLabel: "1.0"
                    - step:
                        type: HarnessApproval
                        name: Post Approval
                        identifier: Post_Approval
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                        failureStrategies: []
                    - step:
                        name: "Notify Deployment "
                        identifier: Notify_Deployment
                        template:
                          templateRef: Notify_Deployment
                          versionLabel: "1.0"
                    - step:
                        type: ShellScript
                        name: Trigger TechMobile Testing
                        identifier: Trigger_TechMobile_Testing
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                rm -rf win-testing

                                git clone https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/win-testing.git

                                declare -A accounts=(
                                  ["int"]=${secrets.getValue("win_account_int")} 
                                  ["perf"]=${secrets.getValue("win_account_perf")}
                                  ["prod"]=${secrets.getValue("win_account_prod")}
                                )

                                declare -A usernames=(
                                  ["int"]=${secrets.getValue("techmobile_user")}
                                  ["perf"]=${secrets.getValue("techmobile_user_perf")}
                                  ["prod"]=${secrets.getValue("techmobile_user_prod")}
                                )

                                declare -A passwords=(
                                  ["int"]=${secrets.getValue("techmobile_password")} 
                                  ["perf"]=${secrets.getValue("techmobile_password_perf")}
                                  ["prod"]=${secrets.getValue("techmobile_password_prod")}
                                )

                                cd win-testing

                                pip3 install selenium
                                pip3 install requests

                                xvfb-run python3 win_techmobile.py --env ${infra.name} \
                                --tech_mobile_creds ${usernames["${infra.name}"]} ${passwords["${infra.name}"]} \
                                --win_server_account ${accounts["${infra.name}"]}
                          environmentVariables: []
                          outputVariables: []
                        timeout: 10m
                        when:
                          stageStatus: Success
                          condition: "\"true\" == \"true\""
                        failureStrategies: []
                    - step:
                        type: ShellScript
                        name: Trigger Performance Testing
                        identifier: Trigger_Performance_Testing
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                API_TOKEN=${secrets.getValue("jenkins_jmeter_api")}
                                JENKINS_USERNAME=${secrets.getValue("jenkins_jmeter_username")}

                                AWS_KEY=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_key")}
                                AWS_SECRET=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_secret")}

                                #rm -rf shared-components

                                #git clone --single-branch --branch master 'https://harness_user:${secrets.getValue("git_harness_user_password")}@stash.dev-charter.net/stash/scm/pip/shared-components.git'

                                #cd shared-components/jmeter

                                rm -rf utils

                                git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/cicd/utils.git'

                                cd utils/jmeter

                                pip3 install -r requirements.txt

                                component=""

                                #if [ "${service.name}" = "win-ui" ];then
                                #  component="ui"
                                #else
                                #  component="server"
                                #fi

                                component="ui"

                                STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                                -s "${AWS_SECRET}" \
                                -r "${workflow.variables.AWS_ROLE}" \
                                -n "win" \
                                -c "${component}" \
                                -e "${infra.name}" \
                                -u "${JENKINS_USERNAME}" \
                                -a "${API_TOKEN}")"

                                echo $STATUS

                                sleep 10s 
                                #component="server"

                                #STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                                #-s "${AWS_SECRET}" \
                                #-r "${workflow.variables.AWS_ROLE}" \
                                #-n "win" \
                                #-c "${component}" \
                                #-e "${infra.name}" \
                                #-u "${JENKINS_USERNAME}" \
                                #-a "${API_TOKEN}")"

                                #echo $STATUS
                          environmentVariables: []
                          outputVariables: []
                        timeout: 10m
                        when:
                          stageStatus: Success
                          condition: &lt;+env.name&gt; == "prod"
                        failureStrategies: []
                    - step:
                        type: ShellScript
                        name: Trigger Robot Tests
                        identifier: Trigger_Robot_Tests
                        spec:
                          shell: Bash
                          onDelegate: true
                          source:
                            type: Inline
                            spec:
                              script: |-
                                pip3 install requests
                                pip3 install redis

                                python3 -c '

                                import requests
                                import json
                                import redis

                                conn = redis.Redis(host="scp-robot-automation.i9tdcv.ng.0001.use1.cache.amazonaws.com", port=6379, db=0, decode_responses=True) 

                                conn.set("deployments:${service.name}:${infra.name}:version", "${context.chart.CHART_VERSION}")
                                tags = conn.smembers("tags:win")

                                url = "https://app.harness.io/gateway/api/webhooks/Sg2917dEy2T9WSqJjfRkD3v2MNkfpBx9VbR528jE?accountId=vQWExnj-Sy2pmVJ8zr1MnQ"

                                data = {
                                       "application": "skQiHPfjS067eEVNmLu1-A",
                                       "parameters": {
                                                     "ROBOT_TAGS": " ".join(tags),
                                                     "ROBOT_TEST_FILE": "winui",
                                                     "EMAILS": "DL-SCP-INT-TEST@charter.com DL-SCP-AUTOMATION@charter.com zach.smialek@charter.com jeffrey.swanson@charter.com",
                                                     "FAILURE_PERCENTAGE": "20",
                                                     "ENV": "${infra.name}",
                                                     "ROUTER_MODEL": None
                                                     }
                                       }

                                headers = { "Content-Type": "application/json"}
                                r = requests.request(method="POST", url=url, data=json.dumps(data), headers=headers)

                                if not r.ok:
                                    print("something went wrong starting scl tests", r.text, r.status_code)
                                '
                          environmentVariables: []
                          outputVariables: []
                        timeout: 10m
                        when:
                          stageStatus: Success
                          condition: "\"true\" == \"true\""
                        failureStrategies: []
              - stepGroup:
                  name: Wrap Up
                  identifier: Wrap_Up
                  steps:
                    - step:
                        type: HarnessApproval
                        name: Approved for INT
                        identifier: Approved_for_INT
                        spec:
                          approvalMessage: Approved for INT
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ${infra.name} != "int"
                        failureStrategies: []
                    - step:
                        type: HarnessApproval
                        name: Approval for perf
                        identifier: Approval_for_perf
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ${infra.name} != "perf"
                        failureStrategies: []
                    - step:
                        type: HarnessApproval
                        name: Approval for Stage or Prod
                        identifier: Approval_for_Stage_or_Prod
                        spec:
                          approvalMessage: Please review the following information and approve the pipeline progression
                          includePipelineExecutionHistory: true
                          approvers:
                            userGroups:
                              - account._account_all_users
                            minimumCount: 1
                            disallowPipelineExecutor: false
                          approverInputs: []
                        timeout: 1d
                        when:
                          stageStatus: Success
                          condition: ${env.name} != "prod"
                        failureStrategies: []
            rollbackSteps:
              - step:
                  name: Helm Rollback
                  identifier: helmRollback
                  type: HelmRollback
                  timeout: 10m
                  spec: {}
              - step:
                  name: Notify Rollback
                  identifier: Notify_Rollback
                  template:
                    templateRef: Notify_Rollback
                    versionLabel: "1.0"
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
        variables:
          - name: CHART_VERSION
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: DEPLOYMENT_NOTIFICATION_EMAILS
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: PROJECT
            type: String
            description: ""
            value: win
          - name: GIT_BRANCH_NAME
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: ENV
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: RELEASE_VERSION
            type: String
            description: ""
            value: arn:aws:iam::750300312428:role/scpFirmwareBatchUpgradeHarness
          - name: AWS_ROLE
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: CANARY_NAMESPACE
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: ENABLE_CANARY_INT
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: ENABLE_CANARY_PERF
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: ENABLE_CANARY_STAGE
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: ENABLE_CANARY_PROD
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: CLUSTER_TAG
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: K8S_CLUSTER_ID
            type: String
            description: ""
            value: &lt;+input&gt;
          - name: GIT_REPO
            type: String
            description: ""
            value: win-helm-chart
          - name: SUB_GROUP
            type: String
            description: ""
            value: scp-services
          - name: REPOSITORY_NAME
            type: String
            description: ""
            value: win-helm-chart
          - name: previous_chart_version
            type: String
            description: ""
            value: &lt;+input&gt;
    - stage:
        name: Deploy
        identifier: Deploy
        template:
          templateRef: account.CD_Deploy
          templateInputs:
            type: Deployment
            spec:
              service:
                serviceRef: &lt;+input&gt;
                serviceInputs: &lt;+input&gt;
              environment:
                environmentRef: &lt;+input&gt;
                environmentInputs: &lt;+input&gt;
                infrastructureDefinitions: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/Demo_Templates.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-82">View</button>
        <dialog id="modal-82" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Demo Templates
  identifier: Demo_Templates
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy Dev
        identifier: Deploy_Dev
        template:
          templateRef: account.CD_Deploy
          versionLabel: "1.0"
          templateInputs:
            type: Deployment
            spec:
              service:
                serviceRef: &lt;+input&gt;
                serviceInputs: &lt;+input&gt;
              environment:
                environmentRef: &lt;+input&gt;
                environmentInputs: &lt;+input&gt;
                infrastructureDefinitions: &lt;+input&gt;
            when:
              condition: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/K8s_Helm_CD_Pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-83">View</button>
        <dialog id="modal-83" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: "K8s Helm CD Pipeline"
  identifier: "K8s_Helm_CD_Pipeline"
  projectIdentifier: "Rohan"
  orgIdentifier: "default"
  tags: {}
  stages:
  - stage:
      name: "Redis"
      identifier: "Redis"
      description: ""
      type: "Deployment"
      spec:
        deploymentType: "Kubernetes"
        service:
          serviceRef: "redis"
          serviceInputs:
            serviceDefinition:
              type: "Kubernetes"
              spec:
                artifacts:
                  primary:
                    type: "DockerRegistry"
                    spec:
                      tag: "&lt;+input&gt;"
        environment:
          environmentRef: "staging"
          deployToAll: false
          infrastructureDefinitions:
          - identifier: "productstaging"
            inputs:
              identifier: "productstaging"
              type: "KubernetesDirect"
              spec:
                namespace: "&lt;+input&gt;.allowedValues(dev,qa,prod)"
        execution:
          steps:
          - step:
              name: "Rollout Deployment"
              identifier: "rolloutDeployment"
              type: "K8sRollingDeploy"
              timeout: "10m"
              spec:
                skipDryRun: false
                pruningEnabled: false
          - step:
              type: "K8sDelete"
              name: "clean up demo"
              identifier: "clean_up_demo"
              spec:
                deleteResources:
                  type: "ReleaseName"
                  spec:
                    deleteNamespace: false
              timeout: "10m"
          rollbackSteps:
          - step:
              name: "Rollback Rollout Deployment"
              identifier: "rollbackRolloutDeployment"
              type: "K8sRollingRollback"
              timeout: "10m"
              spec:
                pruningEnabled: false
      tags: {}
      failureStrategies:
      - onFailure:
          errors:
          - "AllErrors"
          action:
            type: "StageRollback"
  variables:
  - name: "releaseName"
    type: "String"
    description: ""
    value: "&lt;+input&gt;"
  allowStageExecutions: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/cddeployment.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-84">View</button>
        <dialog id="modal-84" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: cd-deployment
    identifier: cddeployment
    allowStageExecutions: false
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    tags: {}
    stages:
        - stage:
              name: CD Deploy
              identifier: CD_Deploy
              description: ""
              type: Deployment
              spec:
                  serviceConfig:
                      serviceRef: helloworld
                      serviceDefinition:
                          type: Kubernetes
                          spec:
                              variables:
                                  - name: nab_variable
                                    type: Number
                                    value: &lt;+input&gt;
                              manifests:
                                  - manifest:
                                        identifier: dev_manifest
                                        type: K8sManifest
                                        spec:
                                            store:
                                                type: Github
                                                spec:
                                                    connectorRef: ThisRohanGupta_Repo
                                                    gitFetchType: Branch
                                                    paths:
                                                        - cdng/
                                                    branch: main
                                            skipResourceVersioning: false
                              artifacts:
                                  primary:
                                      spec:
                                          connectorRef: account.Rohan_Dockerhub
                                          imagePath: library/nginx
                                          tag: &lt;+input&gt;
                                      type: DockerRegistry
                  infrastructure:
                      environmentRef: development
                      infrastructureDefinition:
                          type: KubernetesDirect
                          spec:
                              connectorRef: gkeautopilot
                              namespace: dev
                              releaseName: release-&lt;+INFRA_KEY&gt;
                      allowSimultaneousDeployments: false
                  execution:
                      steps:
                          - step:
                                type: ShellScript
                                name: test
                                identifier: test
                                spec:
                                    shell: Bash
                                    onDelegate: true
                                    source:
                                        type: Inline
                                        spec:
                                            script: echo &lt;+serviceConfig.serviceDefinition.spec.variables.nab_variable&gt;
                                    environmentVariables: []
                                    outputVariables: []
                                    executionTarget: {}
                                timeout: 10m
                      rollbackSteps:
                          - step:
                                name: Rollback Rollout Deployment
                                identifier: rollbackRolloutDeployment
                                type: K8sRollingRollback
                                timeout: 10m
                                spec: {}
                  serviceDependencies: []
              tags: {}
              failureStrategies:
                  - onFailure:
                        errors:
                            - AllErrors
                        action:
                            type: StageRollback
    variables:
        - name: rohan
          type: String
          default: product
          value: &lt;+input&gt;.allowedValues(engineer,document-writer,qa,ceo,product)
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/pipelines/sample.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-85">View</button>
        <dialog id="modal-85" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: sample
  identifier: sample
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: DEploy L3
        identifier: DEploy_L3
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: nginxdemo
            serviceInputs:
              serviceDefinition:
                type: Kubernetes
                spec:
                  artifacts:
                    primary:
                      type: DockerRegistry
                      spec:
                        tag: &lt;+input&gt;
          environment:
            environmentRef: L3
            deployToAll: false
            infrastructureDefinitions:
              - identifier: L3_Default_K8s
          execution:
            steps:
              - stepGroup:
                  name: Canary Deployment
                  identifier: canaryDepoyment
                  steps:
                    - step:
                        name: Canary Deployment
                        identifier: canaryDeployment
                        type: K8sCanaryDeploy
                        timeout: 10m
                        spec:
                          instanceSelection:
                            type: Count
                            spec:
                              count: 1
                          skipDryRun: false
                    - step:
                        name: Canary Delete
                        identifier: canaryDelete
                        type: K8sCanaryDelete
                        timeout: 10m
                        spec: {}
              - stepGroup:
                  name: Primary Deployment
                  identifier: primaryDepoyment
                  steps:
                    - step:
                        name: Rolling Deployment
                        identifier: rollingDeployment
                        type: K8sRollingDeploy
                        timeout: 10m
                        spec:
                          skipDryRun: false
              - step:
                  type: K8sApply
                  name: dev
                  identifier: dev
                  spec:
                    filePaths:
                      - apply/
                    skipDryRun: false
                    skipSteadyStateCheck: false
                    skipRendering: false
                    overrides: []
                  timeout: 10m
            rollbackSteps:
              - step:
                  name: Canary Delete
                  identifier: rollbackCanaryDelete
                  type: K8sCanaryDelete
                  timeout: 10m
                  spec: {}
              - step:
                  name: Rolling Rollback
                  identifier: rollingRollback
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/prod-pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-86">View</button>
        <dialog id="modal-86" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: prod
  identifier: prod
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags:
    prod: ""
  stages:
    - stage:
        name: prod only
        identifier: prod_only
        tags: {}
        template:
          templateRef: demo1
          versionLabel: "1.0"
          gitBranch: main
          templateInputs:
            type: Deployment
            spec:
              service:
                serviceInputs:
                  serviceDefinition:
                    type: Kubernetes
                    spec:
                      manifests:
                        - manifest:
                            identifier: k8s_example
                            type: K8sManifest
                            spec:
                              store:
                                type: Github
                                spec:
                                  connectorRef: &lt;+input&gt;
                      artifacts:
                        primary:
                          primaryArtifactRef: &lt;+input&gt;
                          sources:
                            - identifier: prod
                              type: DockerRegistry
                              spec:
                                digest: &lt;+input&gt;
                      variables:
                        - name: token
                          type: String
                          value: &lt;+input&gt;
                        - name: password
                          type: Secret
                          value: &lt;+input&gt;
                        - name: cpu
                          type: Number
                          value: &lt;+input&gt;
    - stage:
        name: canary
        identifier: canary
        description: ""
        type: Deployment
        spec:
          deploymentType: Kubernetes
          service:
            serviceRef: &lt;+input&gt;
            serviceInputs: &lt;+input&gt;
          environment:
            environmentRef: &lt;+input&gt;
            deployToAll: false
            environmentInputs: &lt;+input&gt;
            serviceOverrideInputs: &lt;+input&gt;
            infrastructureDefinitions: &lt;+input&gt;
          execution:
            steps:
              - stepGroup:
                  name: Canary Deployment
                  identifier: canaryDeployment
                  steps:
                    - step:
                        name: Canary Deployment
                        identifier: canaryDeployment
                        type: K8sCanaryDeploy
                        timeout: 10m
                        spec:
                          instanceSelection:
                            type: Count
                            spec:
                              count: 1
                          skipDryRun: false
                    - step:
                        name: Canary Delete
                        identifier: canaryDelete
                        type: K8sCanaryDelete
                        timeout: 10m
                        spec: {}
                  strategy:
                    repeat:
                      items:
                        - 10%
                        - 25%
                        - 50%
              - stepGroup:
                  name: Primary Deployment
                  identifier: primaryDeployment
                  steps:
                    - step:
                        name: Rolling Deployment
                        identifier: rollingDeployment
                        type: K8sRollingDeploy
                        timeout: 10m
                        spec:
                          skipDryRun: false
            rollbackSteps:
              - step:
                  name: Canary Delete
                  identifier: rollbackCanaryDelete
                  type: K8sCanaryDelete
                  timeout: 10m
                  spec: {}
              - step:
                  name: Rolling Rollback
                  identifier: rollingRollback
                  type: K8sRollingRollback
                  timeout: 10m
                  spec: {}
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: StageRollback
  allowStageExecutions: true
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/public_dockerhub.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-87">View</button>
        <dialog id="modal-87" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: public dockerhub
  identifier: public_dockerhub
  description:
  orgIdentifier: default
  projectIdentifier: git_experience
  type: DockerRegistry
  spec:
    dockerRegistryUrl: https://registry.hub.docker.com/v2/
    providerType: DockerHub
    auth:
      type: Anonymous
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/publish_image_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-88">View</button>
        <dialog id="modal-88" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: publish image
  type: Step
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  spec:
    type: BuildAndPushDockerRegistry
    spec:
      connectorRef: account.Rohan_Dockerhub
      repo: srgupta5328/demo
      tags:
        - lastest
  identifier: publish_image
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/qa-env.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-89">View</button>
        <dialog id="modal-89" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">environment:
  name: stage
  identifier: stage
  description: ""
  tags: {}
  type: PreProduction
  orgIdentifier: default
  projectIdentifier: PM_Signoff
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/qainfra.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-90">View</button>
        <dialog id="modal-90" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">infrastructureDefinition:
  name: qa-infra
  identifier: qainfra
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  environmentRef: stage
  deploymentType: Kubernetes
  type: KubernetesDirect
  spec:
    connectorRef: account.Harness_Kubernetes_Cluster
    namespace: qa
    releaseName: release-&lt;+INFRA_KEY_SHORT_ID&gt;
  allowSimultaneousDeployments: false
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/shell_stage_001.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-91">View</button>
        <dialog id="modal-91" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: shell stage
    identifier: shell_stage
    versionLabel: 0.0.1
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        type: Approval
        spec:
            execution:
                steps:
                    - step:
                          type: ShellScript
                          name: Echo Shell
                          identifier: Echo_Shell
                          spec:
                              shell: Bash
                              onDelegate: true
                              source:
                                  type: Inline
                                  spec:
                                      script: echo "Shell Script"
                              environmentVariables: []
                              outputVariables: []
                              executionTarget: {}
                          timeout: 10m
            serviceDependencies: []
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/stage/WinRM_Primary_Release_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-92">View</button>
        <dialog id="modal-92" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: WinRM Primary Release
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: NativeHelm
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - stepGroup:
              name: Deploy Containers
              identifier: Deploy_Containers
              steps:
                - step:
                    type: ShellScript
                    name: Set_PrePrimary_Value
                    identifier: Set_PrePrimary_Value
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            PRIMARY_WEIGHT=""
                            CANARY_WEIGHT=""
                            CANARY_DEPLOY_MODE=""

                            env=`echo ${infra.name} | sed -e "s/-canary//g"`

                            enable_canary_deploy="false"

                            if [[  (${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp;  $env == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "true" &amp;&amp;  $env == 'perf') || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "true" &amp;&amp;  $env == 'stage') || ( ${workflow.variables.ENABLE_CANARY_PROD} == "true" &amp;&amp;  $env == 'prod')  ]]; then

                                 enable_canary_deploy="true"
                            fi

                            if [[ $enable_canary_deploy == "true" ]]; then
                               export PRIMARY_WEIGHT="0"
                               export CANARY_WEIGHT="100"
                               export CANARY_DEPLOY_MODE="true"
                            else
                               export PRIMARY_WEIGHT="100"
                               export CANARY_WEIGHT="0"
                               export CANARY_DEPLOY_MODE="false"
                            fi

                            #export PRIMARY_WEIGHT="100"
                            #export CANARY_WEIGHT="0"

                            echo "PRIMARY_WEIGHT Value"
                            echo ${PRIMARY_WEIGHT}

                            echo "CANARY_WEIGHT Value"
                            echo ${CANARY_WEIGHT}

                            echo "CANARY_DEPLOY_MODE Value"
                            echo ${CANARY_DEPLOY_MODE}

                            export INFRA_NAME=`echo ${infra.name} | sed -e "s/-canary//g"`

                            echo "INFRA NAME"
                            echo ${INFRA_NAME}
                      environmentVariables: []
                      outputVariables:
                        - name: CANARY_WEIGHT
                          type: String
                          value: CANARY_WEIGHT
                        - name: PRIMARY_WEIGHT
                          type: String
                          value: PRIMARY_WEIGHT
                        - name: INFRA_NAME
                          type: String
                          value: INFRA_NAME
                        - name: CANARY_DEPLOY_MODE
                          type: String
                          value: CANARY_DEPLOY_MODE
                    timeout: 10m
                - step:
                    name: Fetch_EWS_Creds
                    identifier: Fetch_EWS_Creds
                    template:
                      templateRef: Fetch_EWS_Creds
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: &lt;+input&gt;
                - step:
                    name: "Publish Helm Chart Version "
                    identifier: Publish_Helm_Chart_Version
                    template:
                      templateRef: Publish_Helm_Chart_Version
                      versionLabel: "1.0"
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: ${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp; ${workflow.variables.INFRA_NAME}!='int' ) || (${workflow.variables.ENABLE_CANARY_INT} == "true" || ${infra.name}!='int')
                - step:
                    name: Pre Validation
                    identifier: Pre_Validation
                    template:
                      templateRef: Pre_validation
                      versionLabel: "1.0"
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                - step:
                    type: HarnessApproval
                    name: Pre Approval
                    identifier: Pre_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                    failureStrategies: []
                - step:
                    name: Helm Deployment
                    identifier: helmDeployment
                    type: HelmDeploy
                    timeout: 10m
                    spec:
                      skipDryRun: false
                - step:
                    type: HarnessApproval
                    name: Approval for traffic change
                    identifier: Approval_for_traffic_change
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Set_PostPrimary_Value
                    identifier: Set_PostPrimary_Value
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                            if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                              echo "Not running in intended delegate of $CLUSTER_NAME"
                              exit 1
                            fi


                            namespace=${workflow.variables.CANARY_NAMESPACE}

                            primaryweight=100
                            canaryweight=0


                            rm -rf canary-scripts

                            #git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scp/scpdevops/k8s-infrastructure/canary-scripts.git'

                            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                            cd canary-scripts

                            ./split_traffic.sh "$namespace" $primaryweight $canaryweight
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Delete Canary Approval
                    identifier: Delete_Canary_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Delete Canary
                    identifier: Delete_Canary
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                            if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                              echo "Not running in intended delegate of $CLUSTER_NAME"
                              exit 1
                            fi


                            namespace=${workflow.variables.CANARY_NAMESPACE}

                            rm -rf canary-scripts



                            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                            cd canary-scripts

                            ./delete_canary_deploy.sh "$namespace" 
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    name: PostValidation
                    identifier: PostValidation
                    template:
                      templateRef: Post_Validation
                      versionLabel: "1.0"
                - step:
                    type: HarnessApproval
                    name: Post Approval
                    identifier: Post_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                    failureStrategies: []
                - step:
                    name: "Notify Deployment "
                    identifier: Notify_Deployment
                    template:
                      templateRef: Notify_Deployment
                      versionLabel: "1.0"
                - step:
                    type: ShellScript
                    name: Trigger TechMobile Testing
                    identifier: Trigger_TechMobile_Testing
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            rm -rf win-testing

                            git clone https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/win-testing.git

                            declare -A accounts=(
                              ["int"]=${secrets.getValue("win_account_int")} 
                              ["perf"]=${secrets.getValue("win_account_perf")}
                              ["prod"]=${secrets.getValue("win_account_prod")}
                            )

                            declare -A usernames=(
                              ["int"]=${secrets.getValue("techmobile_user")}
                              ["perf"]=${secrets.getValue("techmobile_user_perf")}
                              ["prod"]=${secrets.getValue("techmobile_user_prod")}
                            )

                            declare -A passwords=(
                              ["int"]=${secrets.getValue("techmobile_password")} 
                              ["perf"]=${secrets.getValue("techmobile_password_perf")}
                              ["prod"]=${secrets.getValue("techmobile_password_prod")}
                            )

                            cd win-testing

                            pip3 install selenium
                            pip3 install requests

                            xvfb-run python3 win_techmobile.py --env ${infra.name} \
                            --tech_mobile_creds ${usernames["${infra.name}"]} ${passwords["${infra.name}"]} \
                            --win_server_account ${accounts["${infra.name}"]}
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: "\"true\" == \"true\""
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Trigger Performance Testing
                    identifier: Trigger_Performance_Testing
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            API_TOKEN=${secrets.getValue("jenkins_jmeter_api")}
                            JENKINS_USERNAME=${secrets.getValue("jenkins_jmeter_username")}

                            AWS_KEY=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_key")}
                            AWS_SECRET=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_secret")}

                            #rm -rf shared-components

                            #git clone --single-branch --branch master 'https://harness_user:${secrets.getValue("git_harness_user_password")}@stash.dev-charter.net/stash/scm/pip/shared-components.git'

                            #cd shared-components/jmeter

                            rm -rf utils

                            git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/cicd/utils.git'

                            cd utils/jmeter

                            pip3 install -r requirements.txt

                            component=""

                            #if [ "${service.name}" = "win-ui" ];then
                            #  component="ui"
                            #else
                            #  component="server"
                            #fi

                            component="ui"

                            STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                            -s "${AWS_SECRET}" \
                            -r "${workflow.variables.AWS_ROLE}" \
                            -n "win" \
                            -c "${component}" \
                            -e "${infra.name}" \
                            -u "${JENKINS_USERNAME}" \
                            -a "${API_TOKEN}")"

                            echo $STATUS

                            sleep 10s 
                            #component="server"

                            #STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                            #-s "${AWS_SECRET}" \
                            #-r "${workflow.variables.AWS_ROLE}" \
                            #-n "win" \
                            #-c "${component}" \
                            #-e "${infra.name}" \
                            #-u "${JENKINS_USERNAME}" \
                            #-a "${API_TOKEN}")"

                            #echo $STATUS
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: &lt;+env.name&gt; == "prod"
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Trigger Robot Tests
                    identifier: Trigger_Robot_Tests
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            pip3 install requests
                            pip3 install redis

                            python3 -c '

                            import requests
                            import json
                            import redis

                            conn = redis.Redis(host="scp-robot-automation.i9tdcv.ng.0001.use1.cache.amazonaws.com", port=6379, db=0, decode_responses=True) 

                            conn.set("deployments:${service.name}:${infra.name}:version", "${context.chart.CHART_VERSION}")
                            tags = conn.smembers("tags:win")

                            url = "https://app.harness.io/gateway/api/webhooks/Sg2917dEy2T9WSqJjfRkD3v2MNkfpBx9VbR528jE?accountId=vQWExnj-Sy2pmVJ8zr1MnQ"

                            data = {
                                   "application": "skQiHPfjS067eEVNmLu1-A",
                                   "parameters": {
                                                 "ROBOT_TAGS": " ".join(tags),
                                                 "ROBOT_TEST_FILE": "winui",
                                                 "EMAILS": "DL-SCP-INT-TEST@charter.com DL-SCP-AUTOMATION@charter.com zach.smialek@charter.com jeffrey.swanson@charter.com",
                                                 "FAILURE_PERCENTAGE": "20",
                                                 "ENV": "${infra.name}",
                                                 "ROUTER_MODEL": None
                                                 }
                                   }

                            headers = { "Content-Type": "application/json"}
                            r = requests.request(method="POST", url=url, data=json.dumps(data), headers=headers)

                            if not r.ok:
                                print("something went wrong starting scl tests", r.text, r.status_code)
                            '
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: "\"true\" == \"true\""
                    failureStrategies: []
          - stepGroup:
              name: Wrap Up
              identifier: Wrap_Up
              steps:
                - step:
                    type: HarnessApproval
                    name: Approved for INT
                    identifier: Approved_for_INT
                    spec:
                      approvalMessage: Approved for INT
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${infra.name} != "int"
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Approval for perf
                    identifier: Approval_for_perf
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${infra.name} != "perf"
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Approval for Stage or Prod
                    identifier: Approval_for_Stage_or_Prod
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${env.name} != "prod"
                    failureStrategies: []
        rollbackSteps:
          - step:
              name: Helm Rollback
              identifier: helmRollback
              type: HelmRollback
              timeout: 10m
              spec: {}
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
    variables:
      - name: CHART_VERSION
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: DEPLOYMENT_NOTIFICATION_EMAILS
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: PROJECT
        type: String
        description: ""
        value: win
      - name: GIT_BRANCH_NAME
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENV
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: RELEASE_VERSION
        type: String
        description: ""
        value: arn:aws:iam::750300312428:role/scpFirmwareBatchUpgradeHarness
      - name: AWS_ROLE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: CANARY_NAMESPACE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_INT
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_PERF
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_STAGE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_PROD
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: CLUSTER_TAG
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: K8S_CLUSTER_ID
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: GIT_REPO
        type: String
        description: ""
        value: win-helm-chart
      - name: SUB_GROUP
        type: String
        description: ""
        value: scp-services
      - name: REPOSITORY_NAME
        type: String
        description: ""
        value: win-helm-chart
      - name: previous_chart_version
        type: String
        description: ""
        value: &lt;+input&gt;
  identifier: WinRM_Primary_Release
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/tanzu.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-93">View</button>
        <dialog id="modal-93" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">service:
  name: tanzu
  identifier: tanzu
  orgIdentifier: default
  projectIdentifier: PM_Signoff
  serviceDefinition:
    spec:
      manifests:
        - manifest:
            identifier: dev
            type: TasManifest
            spec:
              cfCliVersion: V7
              store:
                type: ArtifactBundle
                spec:
                  manifestPath: /some/path
                  deployableUnitPath: /some/path
                  artifactBundleType: ZIP
              varsPaths:
                - &lt;+serviceVariable.varPath&gt;
      variables:
        - name: varPath
          type: String
          description: base vars path for service
          required: false
          value: /dev/vars.yaml
    type: TAS
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/CD_Demo_301.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-94">View</button>
        <dialog id="modal-94" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
    name: CD Demo
    identifier: CD_Demo
    versionLabel: 3.0.1
    type: Stage
    projectIdentifier: Continuous_Deployment_Product_Team
    orgIdentifier: Product_Management_Design
    spec:
        description: ""
        type: Deployment
        spec:
            serviceConfig:
                serviceRef: helloworld
                serviceDefinition:
                    type: Kubernetes
                    spec:
                        variables: []
                        manifests:
                            - manifest:
                                  identifier: dev
                                  type: K8sManifest
                                  spec:
                                      store:
                                          type: Github
                                          spec:
                                              connectorRef: ThisRohanGupta_Repo
                                              gitFetchType: Branch
                                              paths:
                                                  - cdng/
                                              branch: main
                                      skipResourceVersioning: false
                        artifacts:
                            primary:
                                spec:
                                    connectorRef: account.Rohan_Dockerhub
                                    imagePath: library/nginx
                                    tag: &lt;+input&gt;
                                type: DockerRegistry
            infrastructure:
                environmentRef: development
                infrastructureDefinition:
                    type: KubernetesDirect
                    spec:
                        connectorRef: gkeautopilot
                        namespace: rohan-dev
                        releaseName: release-&lt;+INFRA_KEY&gt;
                allowSimultaneousDeployments: false
            execution:
                steps:
                    - step:
                          type: K8sRollingDeploy
                          name: Rolling Deployment
                          identifier: Rolling_Deployment
                          spec:
                              skipDryRun: false
                          timeout: 10m
                rollbackSteps: []
        tags: {}
        failureStrategies:
            - onFailure:
                  errors:
                      - AllErrors
                  action:
                      type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Charter_Template.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-95">View</button>
        <dialog id="modal-95" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Charter Template
  identifier: Charter_Template
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy
        identifier: Deploy
        template:
          templateRef: WinRM_Primary_Release
          versionLabel: "1.0"
          templateInputs:
            type: Deployment
            spec:
              service:
                serviceRef: &lt;+input&gt;
                serviceInputs: &lt;+input&gt;
              environment:
                environmentRef: &lt;+input&gt;
                environmentInputs: &lt;+input&gt;
                infrastructureDefinitions: &lt;+input&gt;
              execution:
                steps:
                  - stepGroup:
                      identifier: Deploy_Containers
                      steps:
                        - step:
                            identifier: Fetch_EWS_Creds
                            template:
                              templateInputs:
                                type: ShellScript
                                when:
                                  condition: &lt;+input&gt;
            variables:
              - name: CHART_VERSION
                type: String
                value: &lt;+input&gt;
              - name: DEPLOYMENT_NOTIFICATION_EMAILS
                type: String
                value: &lt;+input&gt;
              - name: GIT_BRANCH_NAME
                type: String
                value: &lt;+serviceVariable.branch&gt;
              - name: ENV
                type: String
                value: &lt;+env.name&gt;
              - name: AWS_ROLE
                type: String
                value: &lt;+input&gt;
              - name: CANARY_NAMESPACE
                type: String
                value: &lt;+input&gt;
              - name: ENABLE_CANARY_INT
                type: String
                value: &lt;+input&gt;
              - name: ENABLE_CANARY_PERF
                type: String
                value: &lt;+input&gt;
              - name: ENABLE_CANARY_STAGE
                type: String
                value: &lt;+input&gt;
              - name: ENABLE_CANARY_PROD
                type: String
                value: &lt;+input&gt;
              - name: CLUSTER_TAG
                type: String
                value: &lt;+input&gt;
              - name: K8S_CLUSTER_ID
                type: String
                value: &lt;+input&gt;
              - name: previous_chart_version
                type: String
                value: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Fetch_EWS_Creds.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-96">View</button>
        <dialog id="modal-96" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Fetch_EWS_Creds
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-
            if [  $env == 'int' ]; then
            EWS_USER1=${secrets.getValue("win-ews-int-user")}
            EWS_PWD1=${secrets.getValue("win-ews-int-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            else 
            if [  $env == 'perf' ]; then
            EWS_USER1=${secrets.getValue("win-ews-perf-user")}
            EWS_PWD1=${secrets.getValue("win-ews-perf-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            elif  [  $env == 'stage' ]; then
            EWS_USER1=${secrets.getValue("win-ews-stage-user")}
            EWS_PWD=${secrets.getValue("win-ews-stage-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}

            elif  [  $env == 'prod' ]; then 
            EWS_USER1=${secrets.getValue("win-ews-prod-user")}
            EWS_PWD1=${secrets.getValue("win-ews-prod-password")}
            echo ${EWS_USER1}
            echo ${EWS_PWD1}
            fi 
            fi 

            export  EWS_USER=${EWS_USER1}
            export  EWS_PWD=${EWS_PWD1}
      environmentVariables: []
      outputVariables:
        - name: EWS_USER
          type: Secret
          value: EWS_USER
        - name: EWS_PWD
          type: Secret
          value: EWS_PWD
    timeout: 10m
    when:
      stageStatus: Success
  identifier: Fetch_EWS_Creds
  versionLabel: 1.0.0
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Helm_Deployment_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-97">View</button>
        <dialog id="modal-97" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Helm Deployment
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: HelmDeploy
    timeout: 10m
    spec:
      skipDryRun: false
      ignoreReleaseHistFailStatus: false
  identifier: Helm_Deployment
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Notify_Rollback_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-98">View</button>
        <dialog id="modal-98" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Notify Rollback
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-

            #!/bin/bash
            rm -rf utils
            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/cicd/utils.git'

            cd utils/webex

            trigger_message() {
              python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_ROLLBACK}" -w "${secrets.getValue("webexBotToken")}"
            }


            env_int="${published_name_int.approvedBy.name}"
            env_perf="${published_name_perf.approvedBy.name}"
            env_stage="${published_name_stage.approvedBy.name}"
            env_prod="${published_name_prod.approvedBy.name}"

                                                                    
            if [ -n "${env_int}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "integration" ]; then
              python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_INT_ROLLBACK}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_perf}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "perf" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_PERF_ROLLBACK}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_stage}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "stage" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_STAGE_ROLLBACK}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_prod}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "prod" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_PROD_ROLLBACK}" -w "${secrets.getValue("webexBotToken")}"
            else
              if [[ -z "${published_name_int}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"

              elif [[ -z "${published_name_perf}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
              elif [[ -z "${published_name_stage}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
              elif [[ -z "${published_name_prod}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
             fi
            fi
      environmentVariables: []
      outputVariables: []
    timeout: 10m
  identifier: Notify_Rollback
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Post_Validation_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-99">View</button>
        <dialog id="modal-99" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Post Validation
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: "aname=` echo \"${workflow.variables.GIT_REPO}\" |   cut -d- -f1` \n\nnam=$aname\necho $nam \nvslist=$(kubectl get vs -n ${nam} | sed  '1d' | awk {'print $1'})\n\nfor vs in $vslist\ndo \n       echo ${vs}\n\n       canaryhostcount=$(kubectl get vs ${vs} -n ${nam} -o json | jq -r '.spec.http[].route[].destination.host'|grep -i -e \"-canary.\"| wc -l)\n       \n\n       if [[ $canaryhostcount -gt 0 ]]; then\n              echo \"$vs  is a Canary Virtual Service\"\n              #Make sure first hostname does not contain canary\n                hostcount=0\n                #totalcount=0\n              \trwcount=$(kubectl get vs ${vs} -n ${nam} -o json | jq '.spec.http' | jq length )\n                #echo $rwcount\n              \tfor (( rw=0; rw&lt;$rwcount; rw++ ))\n\t\t\t\tdo\n\t\t\t\t         testhostname=$(kubectl get vs ${vs} -n ${nam} -o json | jq '.spec.http['$rw'].route['$rw'].destination.host')\n\t\t\t\t         echo $testhostname\n\t\t\t\t         if [[  \"$testhostname\" != *\"canary\"* ]]; then\n\t\t\t\t              weight=$(kubectl get vs ${vs} -n ${nam} -o json | jq '.spec.http['$rw'].route['$rw'].weight')\n\t\t\t\t                if [[ $weight == \"100\" ]]; then\n                                                    echo \"Primary weight matched\"\n                                                else\n                                                     echo \" Weight mismatched for this service ${vs}\"\n                                                     exit\n                                                 fi\n\t\t\t\t         fi\n\t\t\t\tdone\n\n       else\n       \t\techo \"******** $vs  is not a Canary enabled Virtual Service **********\"\n       fi\n\ndone\n\n\ncheck=`helm list -n $nam | grep -i deployed | awk '{print $9}' |  cut -d- -f4 `\necho $check\n\necho ${context.chart.CHART_VERSION} \n\n\n#if [[   $check == ${context.chart.CHART_VERSION}  ]]; then\n#    echo \"version matched\"\n#fi"
      environmentVariables: []
      outputVariables: []
    timeout: 10m
    when:
      stageStatus: Success
  identifier: Post_Validation
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Pre_validation_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-100">View</button>
        <dialog id="modal-100" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Pre_validation
  identifier: Pre_validation
  versionLabel: "1.0"
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  tags: {}
  spec:
    timeout: 10m
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |
            aname=` echo "${workflow.variables.GIT_REPO}" |   cut -d- -f1` 

            nam=$aname

            check=`helm list -n $nam | grep -i deployed | awk '{print $9}' |  cut -d- -f4 `
            echo $check

            echo ${workflow.variables.previous_chart_version}


            if [[   $check == ${workflow.variables.previous_chart_version} ]]; then
                echo "version matched"
            else
                echo "version Mismatched"
            fi
            podcount=`kubectl get pod -n $nam  |  grep -v -i name | grep -v -i completed | grep -v 2/2 | wc -l`

            if [[ $podcount == "0" ]]; then
                echo "all pods are up and running"
            fi
      environmentVariables: []
      outputVariables: []
    when:
      stageStatus: Success
      condition: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Publish_Helm_Chart_Version_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-101">View</button>
        <dialog id="modal-101" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Publish Helm Chart Version
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-
            VERSION=""
            RELEASE_VERSION=""
            gitURL=https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scp/${workflow.variables.SUB_GROUP}/${workflow.variables.PROJECT}/${workflow.variables.GIT_REPO}.git

            if [ -z "${workflow.variables.CHART_VERSION}" ] &amp;&amp; [ -z "${workflow.variables.GIT_BRANCH_NAME}" ]; then
               echo "Please specify either a chart version or branch name"
            exit 1
            fi  

            if [ -z "${workflow.variables.CHART_VERSION}" ]; then
               branchExists=$(git ls-remote --heads $gitURL  | wc -l)
              if [ "${branchExists}" = "0" ]; then
                echo "Could not find branch ${workflow.variables.GIT_BRANCH_NAME} please specify a branch that exists"
                exit 1
              fi
              rm -rf ${workflow.variables.GIT_REPO}

              git clone --single-branch --branch ${workflow.variables.GIT_BRANCH_NAME} $gitURL

              apt-get install -y software-properties-common
              add-apt-repository -y ppa:rmescandon/yq
              apt-get install -y yq

              cd ${workflow.variables.GIT_REPO}
              
              # CHART_VERSION=$(yq r Chart.yaml version)
              #test=$(yq r Chart.yaml version)
              #VERSION=$(yq r Chart.yaml version)
              test=$(yq e '.version' Chart.yaml )
              VERSION=$(yq e '.version' Chart.yaml )
            else
              VERSION=${workflow.variables.CHART_VERSION}
            fi



            if [ -z "$VERSION" ]; then
              echo "Did not find a chart version please review if this is the correct release branch ${workflow.variables.GIT_BRANCH_NAME} or specify chart version"
              exit 1
            fi

            export CHART_VERSION=${VERSION}
            export RELEASE_VERSION=$(echo ${VERSION} | cut -f1,2 -d.)
            echo "Chart Version"
            echo ${VERSION}
            echo "Release Version"
            echo $RELEASE_VERSION
      environmentVariables: []
      outputVariables:
        - name: CHART_VERSION
          type: String
          value: CHART_VERSION
        - name: RELEASE_VERSION
          type: String
          value: RELEASE_VERSION
    timeout: 10m
    when:
      stageStatus: Success
      condition: &lt;+input&gt;
  identifier: Publish_Helm_Chart_Version
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/Sample_Stage_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-102">View</button>
        <dialog id="modal-102" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Sample Stage
  type: Stage
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: Deployment
    spec:
      deploymentType: NativeHelm
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - stepGroup:
              name: Deploy Containers
              identifier: Deploy_Containers
              steps:
                - step:
                    type: ShellScript
                    name: Set_PrePrimary_Value
                    identifier: Set_PrePrimary_Value
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            PRIMARY_WEIGHT=""
                            CANARY_WEIGHT=""
                            CANARY_DEPLOY_MODE=""

                            env=`echo ${infra.name} | sed -e "s/-canary//g"`

                            enable_canary_deploy="false"

                            if [[  (${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp;  $env == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "true" &amp;&amp;  $env == 'perf') || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "true" &amp;&amp;  $env == 'stage') || ( ${workflow.variables.ENABLE_CANARY_PROD} == "true" &amp;&amp;  $env == 'prod')  ]]; then

                                 enable_canary_deploy="true"
                            fi

                            if [[ $enable_canary_deploy == "true" ]]; then
                               export PRIMARY_WEIGHT="0"
                               export CANARY_WEIGHT="100"
                               export CANARY_DEPLOY_MODE="true"
                            else
                               export PRIMARY_WEIGHT="100"
                               export CANARY_WEIGHT="0"
                               export CANARY_DEPLOY_MODE="false"
                            fi

                            #export PRIMARY_WEIGHT="100"
                            #export CANARY_WEIGHT="0"

                            echo "PRIMARY_WEIGHT Value"
                            echo ${PRIMARY_WEIGHT}

                            echo "CANARY_WEIGHT Value"
                            echo ${CANARY_WEIGHT}

                            echo "CANARY_DEPLOY_MODE Value"
                            echo ${CANARY_DEPLOY_MODE}

                            export INFRA_NAME=`echo ${infra.name} | sed -e "s/-canary//g"`

                            echo "INFRA NAME"
                            echo ${INFRA_NAME}
                      environmentVariables: []
                      outputVariables:
                        - name: CANARY_WEIGHT
                          type: String
                          value: CANARY_WEIGHT
                        - name: PRIMARY_WEIGHT
                          type: String
                          value: PRIMARY_WEIGHT
                        - name: INFRA_NAME
                          type: String
                          value: INFRA_NAME
                        - name: CANARY_DEPLOY_MODE
                          type: String
                          value: CANARY_DEPLOY_MODE
                    timeout: 10m
                - step:
                    name: Fetch_EWS_Creds
                    identifier: Fetch_EWS_Creds
                    template:
                      templateRef: Fetch_EWS_Creds
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: &lt;+input&gt;
                - step:
                    name: "Publish Helm Chart Version "
                    identifier: Publish_Helm_Chart_Version
                    template:
                      templateRef: Publish_Helm_Chart_Version
                      versionLabel: "1.0"
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: ${workflow.variables.ENABLE_CANARY_INT} == "true" &amp;&amp; ${workflow.variables.INFRA_NAME}!='int' ) || (${workflow.variables.ENABLE_CANARY_INT} == "true" || ${infra.name}!='int')
                - step:
                    name: Pre Validation
                    identifier: Pre_Validation
                    template:
                      templateRef: Pre_validation
                      versionLabel: "1.0"
                      templateInputs:
                        type: ShellScript
                        when:
                          condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                - step:
                    type: HarnessApproval
                    name: Pre Approval
                    identifier: Pre_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                    failureStrategies: []
                - step:
                    name: Helm Deployment
                    identifier: helmDeployment
                    type: HelmDeploy
                    timeout: 10m
                    spec:
                      skipDryRun: false
                - step:
                    type: HarnessApproval
                    name: Approval for traffic change
                    identifier: Approval_for_traffic_change
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Set_PostPrimary_Value
                    identifier: Set_PostPrimary_Value
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                            if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                              echo "Not running in intended delegate of $CLUSTER_NAME"
                              exit 1
                            fi


                            namespace=${workflow.variables.CANARY_NAMESPACE}

                            primaryweight=100
                            canaryweight=0


                            rm -rf canary-scripts

                            #git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scp/scpdevops/k8s-infrastructure/canary-scripts.git'

                            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                            cd canary-scripts

                            ./split_traffic.sh "$namespace" $primaryweight $canaryweight
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Delete Canary Approval
                    identifier: Delete_Canary_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Delete Canary
                    identifier: Delete_Canary
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            KOPS_CLUSTER_BASE=$(kubectl -n kube-system get configmap kops-controller -o jsonpath={.data.'config\.yaml'} | jq '.configBase')
                            if [[ $KOPS_CLUSTER_BASE != *"${workflow.variables.K8S_CLUSTER_ID}"* ]]; then
                              echo "Not running in intended delegate of $CLUSTER_NAME"
                              exit 1
                            fi


                            namespace=${workflow.variables.CANARY_NAMESPACE}

                            rm -rf canary-scripts



                            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/canary-scripts.git'

                            cd canary-scripts

                            ./delete_canary_deploy.sh "$namespace" 
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: ( ${workflow.variables.ENABLE_CANARY_INT} == "false" &amp;&amp; ${infra.name} == 'int' ) || ( ${workflow.variables.ENABLE_CANARY_PERF} == "false" &amp;&amp; ${infra.name} == 'perf' ) || ( ${workflow.variables.ENABLE_CANARY_STAGE} == "false" &amp;&amp; ${infra.name} == 'stage' ) || ( ${workflow.variables.ENABLE_CANARY_PROD} == "false" &amp;&amp; ${infra.name} == 'prod' )
                    failureStrategies: []
                - step:
                    name: PostValidation
                    identifier: PostValidation
                    template:
                      templateRef: Post_Validation
                      versionLabel: "1.0"
                - step:
                    type: HarnessApproval
                    name: Post Approval
                    identifier: Post_Approval
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ( ${infra.name}=='perf' || ${infra.name}=='int')
                    failureStrategies: []
                - step:
                    name: "Notify Deployment "
                    identifier: Notify_Deployment
                    template:
                      templateRef: Notify_Deployment
                      versionLabel: "1.0"
                - step:
                    type: ShellScript
                    name: Trigger TechMobile Testing
                    identifier: Trigger_TechMobile_Testing
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            rm -rf win-testing

                            git clone https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/win-testing.git

                            declare -A accounts=(
                              ["int"]=${secrets.getValue("win_account_int")} 
                              ["perf"]=${secrets.getValue("win_account_perf")}
                              ["prod"]=${secrets.getValue("win_account_prod")}
                            )

                            declare -A usernames=(
                              ["int"]=${secrets.getValue("techmobile_user")}
                              ["perf"]=${secrets.getValue("techmobile_user_perf")}
                              ["prod"]=${secrets.getValue("techmobile_user_prod")}
                            )

                            declare -A passwords=(
                              ["int"]=${secrets.getValue("techmobile_password")} 
                              ["perf"]=${secrets.getValue("techmobile_password_perf")}
                              ["prod"]=${secrets.getValue("techmobile_password_prod")}
                            )

                            cd win-testing

                            pip3 install selenium
                            pip3 install requests

                            xvfb-run python3 win_techmobile.py --env ${infra.name} \
                            --tech_mobile_creds ${usernames["${infra.name}"]} ${passwords["${infra.name}"]} \
                            --win_server_account ${accounts["${infra.name}"]}
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: "\"true\" == \"true\""
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Trigger Performance Testing
                    identifier: Trigger_Performance_Testing
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            API_TOKEN=${secrets.getValue("jenkins_jmeter_api")}
                            JENKINS_USERNAME=${secrets.getValue("jenkins_jmeter_username")}

                            AWS_KEY=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_key")}
                            AWS_SECRET=${secrets.getValue("scpFirmwareBatchUpgradeHarnessUser_secret")}

                            #rm -rf shared-components

                            #git clone --single-branch --branch master 'https://harness_user:${secrets.getValue("git_harness_user_password")}@stash.dev-charter.net/stash/scm/pip/shared-components.git'

                            #cd shared-components/jmeter

                            rm -rf utils

                            git clone --single-branch --branch master 'https://${secrets.getValue("scp-harness-gitlab-user")}:${secrets.getValue("scp-harness-gitlab-password")}@gitlab.se-charter.net/scpautomation/cicd/utils.git'

                            cd utils/jmeter

                            pip3 install -r requirements.txt

                            component=""

                            #if [ "${service.name}" = "win-ui" ];then
                            #  component="ui"
                            #else
                            #  component="server"
                            #fi

                            component="ui"

                            STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                            -s "${AWS_SECRET}" \
                            -r "${workflow.variables.AWS_ROLE}" \
                            -n "win" \
                            -c "${component}" \
                            -e "${infra.name}" \
                            -u "${JENKINS_USERNAME}" \
                            -a "${API_TOKEN}")"

                            echo $STATUS

                            sleep 10s 
                            #component="server"

                            #STATUS="$(python3 jmeter.py -k "${AWS_KEY}" \
                            #-s "${AWS_SECRET}" \
                            #-r "${workflow.variables.AWS_ROLE}" \
                            #-n "win" \
                            #-c "${component}" \
                            #-e "${infra.name}" \
                            #-u "${JENKINS_USERNAME}" \
                            #-a "${API_TOKEN}")"

                            #echo $STATUS
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: &lt;+env.name&gt; == "prod"
                    failureStrategies: []
                - step:
                    type: ShellScript
                    name: Trigger Robot Tests
                    identifier: Trigger_Robot_Tests
                    spec:
                      shell: Bash
                      onDelegate: true
                      source:
                        type: Inline
                        spec:
                          script: |-
                            pip3 install requests
                            pip3 install redis

                            python3 -c '

                            import requests
                            import json
                            import redis

                            conn = redis.Redis(host="scp-robot-automation.i9tdcv.ng.0001.use1.cache.amazonaws.com", port=6379, db=0, decode_responses=True) 

                            conn.set("deployments:${service.name}:${infra.name}:version", "${context.chart.CHART_VERSION}")
                            tags = conn.smembers("tags:win")

                            url = "https://app.harness.io/gateway/api/webhooks/Sg2917dEy2T9WSqJjfRkD3v2MNkfpBx9VbR528jE?accountId=vQWExnj-Sy2pmVJ8zr1MnQ"

                            data = {
                                   "application": "skQiHPfjS067eEVNmLu1-A",
                                   "parameters": {
                                                 "ROBOT_TAGS": " ".join(tags),
                                                 "ROBOT_TEST_FILE": "winui",
                                                 "EMAILS": "DL-SCP-INT-TEST@charter.com DL-SCP-AUTOMATION@charter.com zach.smialek@charter.com jeffrey.swanson@charter.com",
                                                 "FAILURE_PERCENTAGE": "20",
                                                 "ENV": "${infra.name}",
                                                 "ROUTER_MODEL": None
                                                 }
                                   }

                            headers = { "Content-Type": "application/json"}
                            r = requests.request(method="POST", url=url, data=json.dumps(data), headers=headers)

                            if not r.ok:
                                print("something went wrong starting scl tests", r.text, r.status_code)
                            '
                      environmentVariables: []
                      outputVariables: []
                    timeout: 10m
                    when:
                      stageStatus: Success
                      condition: "\"true\" == \"true\""
                    failureStrategies: []
          - stepGroup:
              name: Wrap Up
              identifier: Wrap_Up
              steps:
                - step:
                    type: HarnessApproval
                    name: Approved for INT
                    identifier: Approved_for_INT
                    spec:
                      approvalMessage: Approved for INT
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${infra.name} != "int"
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Approval for perf
                    identifier: Approval_for_perf
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${infra.name} != "perf"
                    failureStrategies: []
                - step:
                    type: HarnessApproval
                    name: Approval for Stage or Prod
                    identifier: Approval_for_Stage_or_Prod
                    spec:
                      approvalMessage: Please review the following information and approve the pipeline progression
                      includePipelineExecutionHistory: true
                      approvers:
                        userGroups:
                          - account._account_all_users
                        minimumCount: 1
                        disallowPipelineExecutor: false
                      approverInputs: []
                    timeout: 1d
                    when:
                      stageStatus: Success
                      condition: ${env.name} != "prod"
                    failureStrategies: []
        rollbackSteps:
          - step:
              name: Helm Rollback
              identifier: helmRollback
              type: HelmRollback
              timeout: 10m
              spec: {}
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
    variables:
      - name: CHART_VERSION
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: DEPLOYMENT_NOTIFICATION_EMAILS
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: PROJECT
        type: String
        description: ""
        value: win
      - name: GIT_BRANCH_NAME
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENV
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: RELEASE_VERSION
        type: String
        description: ""
        value: arn:aws:iam::750300312428:role/scpFirmwareBatchUpgradeHarness
      - name: AWS_ROLE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: CANARY_NAMESPACE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_INT
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_PERF
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_STAGE
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: ENABLE_CANARY_PROD
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: CLUSTER_TAG
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: K8S_CLUSTER_ID
        type: String
        description: ""
        value: &lt;+input&gt;
      - name: GIT_REPO
        type: String
        description: ""
        value: win-helm-chart
      - name: SUB_GROUP
        type: String
        description: ""
        value: scp-services
      - name: REPOSITORY_NAME
        type: String
        description: ""
        value: win-helm-chart
      - name: previous_chart_version
        type: String
        description: ""
        value: &lt;+input&gt;
  identifier: Sample_Stage
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templates/dev/sample.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-103">View</button>
        <dialog id="modal-103" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: sample
  identifier: sample
  versionLabel: "1.0"
  type: Stage
  tags: {}
  spec:
    type: Deployment
    spec:
      deploymentType: Kubernetes
      service:
        serviceRef: &lt;+input&gt;
        serviceInputs: &lt;+input&gt;
      environment:
        environmentRef: &lt;+input&gt;
        deployToAll: false
        environmentInputs: &lt;+input&gt;
        infrastructureDefinitions: &lt;+input&gt;
      execution:
        steps:
          - step:
              name: Rollout Deployment
              identifier: rolloutDeployment
              type: K8sRollingDeploy
              timeout: 10m
              spec:
                skipDryRun: false
                pruningEnabled: false
        rollbackSteps:
          - step:
              name: Rollback Rollout Deployment
              identifier: rollbackRolloutDeployment
              type: K8sRollingRollback
              timeout: 10m
              spec:
                pruningEnabled: false
    failureStrategies:
      - onFailure:
          errors:
            - AllErrors
          action:
            type: StageRollback
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/templatesNotify_Deployment_1.0.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-104">View</button>
        <dialog id="modal-104" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: Notify Deployment
  type: Step
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    type: ShellScript
    spec:
      shell: Bash
      onDelegate: true
      source:
        type: Inline
        spec:
          script: |-
            #!/bin/bash
            rm -rf utils
            git clone --single-branch --branch master 'https://${secrets.getValue("xg_gitlab_username")}:${secrets.getValue("xg_gitlab_password")}@gitlab.spectrumflow.net/scp/scpdevops/cicd/utils.git'

            cd utils/webex

            trigger_message() {
              python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN}" -w "${secrets.getValue("webexBotToken")}"
            }

            # variableint="${published_name_int.approvedBy.name}"
            # variableperf="${published_name_perf.approvedBy.name}"
            # variablestage="${published_name_stage.approvedBy.name}"
            # variableprod="${published_name_prod.approvedBy.name}"


            env_int="${published_name_int.approvedBy.name}"
            env_perf="${published_name_perf.approvedBy.name}"
            env_stage="${published_name_stage.approvedBy.name}"
            env_prod="${published_name_prod.approvedBy.name}"


            if [ -n "${env_int}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "int" ]; then
              python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_INT}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_perf}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "perf" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_PERF}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_stage}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "stage" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_STAGE}" -w "${secrets.getValue("webexBotToken")}"
              elif [ -n "${env_prod}" ] &amp;&amp; [ "${context.canary.INFRA_NAME}" == "prod" ]; then
                  python3 post_message.py -a "${app.name}" -p "${app.defaults.DEPLOYMENT_PLAIN_TEXT}" -m "${app.defaults.DEPLOYMENT_MARKDOWN_PROD}" -w "${secrets.getValue("webexBotToken")}"
            else
              if [[ -z "${published_name_int}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"

              elif [[ -z "${published_name_perf}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
              elif [[ -z "${published_name_stage}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
              elif [[ -z "${published_name_prod}" ]]; then
                echo "*****************"
                trigger_message
                echo "*****************"
             fi
            fi
      environmentVariables: []
      outputVariables: []
    timeout: 10m
  identifier: Notify_Deployment
  versionLabel: "1.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/test.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-105">View</button>
        <dialog id="modal-105" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">connector:
  name: test
  identifier: test
  description:
  orgIdentifier: default
  projectIdentifier: CD_Product_Team
  type: Azure
  spec:
    credential:
      type: InheritFromDelegate
      spec:
        auth:
          type: SystemAssignedManagedIdentity
    delegateSelectors:
    - local-rohan
    azureEnvironmentType: AZURE
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">.harness/vivun_hello.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-106">View</button>
        <dialog id="modal-106" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
    name: vivun hello
    identifier: vivun_hello
    projectIdentifier: CD_Product_Team
    orgIdentifier: default
    tags: {}
    properties:
        ci:
            codebase:
                connectorRef: ProductManagementRepo
                build: &lt;+input&gt;
    stages:
        - stage:
              name: Build Ephemeral Backend
              identifier: Build_Ephemeral_Backend
              type: CI
              spec:
                  cloneCodebase: true
                  sharedPaths:
                      - /vars/run
                  infrastructure:
                      type: KubernetesDirect
                      spec:
                          connectorRef: rohansandbox
                          namespace: &lt;+input&gt;
                          automountServiceAccountToken: true
                          nodeSelector: {}
                  execution:
                      steps:
                          - step:
                                type: BuildAndPushECR
                                name: test
                                identifier: test
                                spec:
                                    connectorRef: &lt;+input&gt;
                                    region: &lt;+input&gt;
                                    account: &lt;+input&gt;
                                    imageName: &lt;+input&gt;
                                    tags:
                                        - test
                                when:
                                    stageStatus: Success
                                    condition: if &lt;+pipeline.variables.frontEndOnly&gt; == true
                                failureStrategies: []
    variables:
        - name: branch
          type: String
          value: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">azure-pipelines.yml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-107">View</button>
        <dialog id="modal-107" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># Docker
# Build a Docker image
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

trigger:
- main

resources:
- repo: self

variables:
  tag: '$(Build.BuildId)'

stages:
- stage: Build
  displayName: Build image
  jobs:
  - job: Build
    displayName: Build
    pool:
      vmImage: ubuntu-latest
    steps:
    - task: Docker@2
      displayName: Build an image
      inputs:
        command: build
        dockerfile: '**/Dockerfile'
        tags: |
          $(tag)
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cd_lab/sample-webapp/deployment.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-108">View</button>
        <dialog id="modal-108" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">## Deployment YAML

apiVersion: apps/v1
kind: Deployment
metadata:
  name: sample-webapp
spec:
  replicas: {{.Values.replica}}
  selector:
    matchLabels:
      app: sample-webapp
  template:
    metadata:
      labels:
        app: sample-webapp
    spec:
      containers:
      - name: webapp
        image: gcr.io/google-samples/hello-app:1.0
        ports:
        - containerPort: 8080
        resources:
          requests:
            cpu: 200m
          limits:
            cpu: 500m


</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cd_lab/sample-webapp/hpa.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-109">View</button>
        <dialog id="modal-109" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># harness.io/skip-file-for-deploy
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  name: sample-webapp-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: sample-webapp
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cd_lab/sample-webapp/values.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-110">View</button>
        <dialog id="modal-110" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">replica: &lt;+serviceVariables.replica&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cdng/templates/deployment.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-111">View</button>
        <dialog id="modal-111" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v1
kind: ConfigMap
metadata:
  name: {{.Values.name}}-config
data:
  key: value
---
{{- if .Values.createImagePullSecret}}
apiVersion: v1
kind: Secret
metadata:
  name: {{.Values.name}}-dockercfg
  annotations:
    harness.io/skip-versioning: true
data:
  .dockercfg: {{.Values.dockercfg}}
type: kubernetes.io/dockercfg
{{- end}}
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{.Values.name}}-deployment
spec:
  replicas: {{int .Values.replicas}}
  selector:
    matchLabels:
      app: {{.Values.name}}
  template:
    metadata:
      labels:
        app: {{.Values.name}}
    spec:
      {{- if .Values.createImagePullSecret}}
      imagePullSecrets:
      - name: {{.Values.name}}-dockercfg
      {{- end}}
      containers:
      - name: {{.Values.name}}
        image: {{.Values.image}}
        envFrom:
        - configMapRef:
            name: {{.Values.name}}-config
        resources:
          limits:
            memory: 512Mi
            cpu: 100m
          requests:
            memory: 512Mi
            cpu: 100m
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cdng/templates/namespace.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-112">View</button>
        <dialog id="modal-112" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">{{- if .Values.createNamespace}}
apiVersion: v1
kind: Namespace
metadata:
  name: {{.Values.namespace}}
{{- end}}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cdng/templates/service.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-113">View</button>
        <dialog id="modal-113" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v1
kind: Service
metadata:
  name: {{.Values.name}}-svc
spec:
  type: {{.Values.serviceType}}
  ports:
  - port: {{.Values.servicePort}}
    targetPort: {{.Values.serviceTargetPort}}
    protocol: TCP
  selector:
    app: {{.Values.name}}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">cdng/values.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-114">View</button>
        <dialog id="modal-114" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">name: &lt;+service.name&gt;
replicas: 1
image: library/nginx:latest

# Namespace Configuration
createNamespace: true
namespace: &lt;+infra.namespace&gt;

# Service Type allow you to specify what kind of service you want.
# Possible values for ServiceType are:
# ClusterIP | NodePort | LoadBalancer | ExternalName
serviceType: LoadBalancer

# A Service can map an incoming port to any targetPort.
# targetPort is where application is listening on inside the container.
servicePort: 80
serviceTargetPort: 80


env:
  config:
    environment: devRel

</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/Chart.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-115">View</button>
        <dialog id="modal-115" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v2
name: mychart
description: A Helm chart for Kubernetes

# A chart can be either an 'application' or a 'library' chart.
#
# Application charts are a collection of templates that can be packaged into versioned archives
# to be deployed.
#
# Library charts provide useful utilities or functions for the chart developer. They're included as
# a dependency of application charts to inject those utilities and functions into the rendering
# pipeline. Library charts do not define any templates and therefore cannot be deployed.
type: application

# This is the chart version. This version number should be incremented each time you make changes
# to the chart and its templates, including the app version.
# Versions are expected to follow Semantic Versioning (https://semver.org/)
version: 0.1.0

# This is the version number of the application being deployed. This version number should be
# incremented each time you make changes to the application. Versions are not expected to
# follow Semantic Versioning. They should reflect the version the application is using.
# It is recommended to use it with quotes.
appVersion: "1.16.0"
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/deployment.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-116">View</button>
        <dialog id="modal-116" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
spec:
  {{- if not .Values.autoscaling.enabled }}
  replicas: {{ .Values.replicaCount }}
  {{- end }}
  selector:
    matchLabels:
      {{- include "mychart.selectorLabels" . | nindent 6 }}
  template:
    metadata:
      {{- with .Values.podAnnotations }}
      annotations:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      labels:
        {{- include "mychart.selectorLabels" . | nindent 8 }}
    spec:
      {{- with .Values.imagePullSecrets }}
      imagePullSecrets:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      serviceAccountName: {{ include "mychart.serviceAccountName" . }}
      securityContext:
        {{- toYaml .Values.podSecurityContext | nindent 8 }}
      containers:
        - name: {{ .Chart.Name }}
          securityContext:
            {{- toYaml .Values.securityContext | nindent 12 }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
          imagePullPolicy: {{ .Values.image.pullPolicy }}
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: http
          readinessProbe:
            httpGet:
              path: /
              port: http
          resources:
            {{- toYaml .Values.resources | nindent 12 }}
      {{- with .Values.nodeSelector }}
      nodeSelector:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      {{- with .Values.affinity }}
      affinity:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      {{- with .Values.tolerations }}
      tolerations:
        {{- toYaml . | nindent 8 }}
      {{- end }}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/hpa.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-117">View</button>
        <dialog id="modal-117" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">{{- if .Values.autoscaling.enabled }}
apiVersion: autoscaling/v2beta1
kind: HorizontalPodAutoscaler
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: {{ include "mychart.fullname" . }}
  minReplicas: {{ .Values.autoscaling.minReplicas }}
  maxReplicas: {{ .Values.autoscaling.maxReplicas }}
  metrics:
    {{- if .Values.autoscaling.targetCPUUtilizationPercentage }}
    - type: Resource
      resource:
        name: cpu
        targetAverageUtilization: {{ .Values.autoscaling.targetCPUUtilizationPercentage }}
    {{- end }}
    {{- if .Values.autoscaling.targetMemoryUtilizationPercentage }}
    - type: Resource
      resource:
        name: memory
        targetAverageUtilization: {{ .Values.autoscaling.targetMemoryUtilizationPercentage }}
    {{- end }}
{{- end }}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/ingress.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-118">View</button>
        <dialog id="modal-118" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">{{- if .Values.ingress.enabled -}}
{{- $fullName := include "mychart.fullname" . -}}
{{- $svcPort := .Values.service.port -}}
{{- if and .Values.ingress.className (not (semverCompare "&gt;=1.18-0" .Capabilities.KubeVersion.GitVersion)) }}
  {{- if not (hasKey .Values.ingress.annotations "kubernetes.io/ingress.class") }}
  {{- $_ := set .Values.ingress.annotations "kubernetes.io/ingress.class" .Values.ingress.className}}
  {{- end }}
{{- end }}
{{- if semverCompare "&gt;=1.19-0" .Capabilities.KubeVersion.GitVersion -}}
apiVersion: networking.k8s.io/v1
{{- else if semverCompare "&gt;=1.14-0" .Capabilities.KubeVersion.GitVersion -}}
apiVersion: networking.k8s.io/v1beta1
{{- else -}}
apiVersion: extensions/v1beta1
{{- end }}
kind: Ingress
metadata:
  name: {{ $fullName }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
  {{- with .Values.ingress.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
spec:
  {{- if and .Values.ingress.className (semverCompare "&gt;=1.18-0" .Capabilities.KubeVersion.GitVersion) }}
  ingressClassName: {{ .Values.ingress.className }}
  {{- end }}
  {{- if .Values.ingress.tls }}
  tls:
    {{- range .Values.ingress.tls }}
    - hosts:
        {{- range .hosts }}
        - {{ . | quote }}
        {{- end }}
      secretName: {{ .secretName }}
    {{- end }}
  {{- end }}
  rules:
    {{- range .Values.ingress.hosts }}
    - host: {{ .host | quote }}
      http:
        paths:
          {{- range .paths }}
          - path: {{ .path }}
            {{- if and .pathType (semverCompare "&gt;=1.18-0" $.Capabilities.KubeVersion.GitVersion) }}
            pathType: {{ .pathType }}
            {{- end }}
            backend:
              {{- if semverCompare "&gt;=1.19-0" $.Capabilities.KubeVersion.GitVersion }}
              service:
                name: {{ $fullName }}
                port:
                  number: {{ $svcPort }}
              {{- else }}
              serviceName: {{ $fullName }}
              servicePort: {{ $svcPort }}
              {{- end }}
          {{- end }}
    {{- end }}
{{- end }}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/service.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-119">View</button>
        <dialog id="modal-119" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v1
kind: Service
metadata:
  name: {{ include "mychart.fullname" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    {{- include "mychart.selectorLabels" . | nindent 4 }}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/serviceaccount.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-120">View</button>
        <dialog id="modal-120" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">{{- if .Values.serviceAccount.create -}}
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ include "mychart.serviceAccountName" . }}
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
  {{- with .Values.serviceAccount.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
{{- end }}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/templates/tests/test-connection.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-121">View</button>
        <dialog id="modal-121" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v1
kind: Pod
metadata:
  name: "{{ include "mychart.fullname" . }}-test-connection"
  labels:
    {{- include "mychart.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['{{ include "mychart.fullname" . }}:{{ .Values.service.port }}']
  restartPolicy: Never
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">helm-cdng/mychart/values.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-122">View</button>
        <dialog id="modal-122" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># Default values for mychart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: nginx
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">jobs/pi.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-123">View</button>
        <dialog id="modal-123" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: batch/v1
kind: Job
metadata:
  name: pi-with-ttl
spec:
  ttlSecondsAfterFinished: 100
  template:
    spec:
      containers:
      - name: pi
        image: perl
        command: ["perl",  "-Mbignum=bpi", "-wle", "print bpi(2000)"]
      restartPolicy: Never
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">k8s/microservice-demo.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-124">View</button>
        <dialog id="modal-124" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs"># Copyright 2018 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# ----------------------------------------------------------
# WARNING: This file is autogenerated. Do not manually edit.
# ----------------------------------------------------------

apiVersion: apps/v1
kind: Deployment
metadata:
  name: emailservice
spec:
  selector:
    matchLabels:
      app: emailservice
  template:
    metadata:
      labels:
        app: emailservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/emailservice:v0.3.4
        ports:
        - containerPort: 8080
        env:
        - name: PORT
          value: "8080"
        # - name: DISABLE_TRACING
        #   value: "1"
        - name: DISABLE_PROFILER
          value: "1"
        readinessProbe:
          periodSeconds: 5
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:8080"]
        livenessProbe:
          periodSeconds: 5
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:8080"]
        resources:
          requests:
            cpu: 100m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: emailservice
spec:
  type: ClusterIP
  selector:
    app: emailservice
  ports:
  - name: grpc
    port: 5000
    targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: checkoutservice
spec:
  selector:
    matchLabels:
      app: checkoutservice
  template:
    metadata:
      labels:
        app: checkoutservice
    spec:
      serviceAccountName: default
      containers:
        - name: server
          image: gcr.io/google-samples/microservices-demo/checkoutservice:v0.3.4
          ports:
          - containerPort: 5050
          readinessProbe:
            exec:
              command: ["/bin/grpc_health_probe", "-addr=:5050"]
          livenessProbe:
            exec:
              command: ["/bin/grpc_health_probe", "-addr=:5050"]
          env:
          - name: PORT
            value: "5050"
          - name: PRODUCT_CATALOG_SERVICE_ADDR
            value: "productcatalogservice:3550"
          - name: SHIPPING_SERVICE_ADDR
            value: "shippingservice:50051"
          - name: PAYMENT_SERVICE_ADDR
            value: "paymentservice:50051"
          - name: EMAIL_SERVICE_ADDR
            value: "emailservice:5000"
          - name: CURRENCY_SERVICE_ADDR
            value: "currencyservice:7000"
          - name: CART_SERVICE_ADDR
            value: "cartservice:7070"
          # - name: DISABLE_STATS
          #   value: "1"
          # - name: DISABLE_TRACING
          #   value: "1"
          # - name: DISABLE_PROFILER
          #   value: "1"
          # - name: JAEGER_SERVICE_ADDR
          #   value: "jaeger-collector:14268"
          resources:
            requests:
              cpu: 100m
              memory: 64Mi
            limits:
              cpu: 200m
              memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: checkoutservice
spec:
  type: ClusterIP
  selector:
    app: checkoutservice
  ports:
  - name: grpc
    port: 5050
    targetPort: 5050
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: recommendationservice
spec:
  selector:
    matchLabels:
      app: recommendationservice
  template:
    metadata:
      labels:
        app: recommendationservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/recommendationservice:v0.3.4
        ports:
        - containerPort: 8080
        readinessProbe:
          periodSeconds: 5
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:8080"]
        livenessProbe:
          periodSeconds: 5
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:8080"]
        env:
        - name: PORT
          value: "8080"
        - name: PRODUCT_CATALOG_SERVICE_ADDR
          value: "productcatalogservice:3550"
        # - name: DISABLE_TRACING
        #   value: "1"
        # - name: DISABLE_PROFILER
        #   value: "1"
        # - name: DISABLE_DEBUGGER
        #   value: "1"
        resources:
          requests:
            cpu: 100m
            memory: 220Mi
          limits:
            cpu: 200m
            memory: 450Mi
---
apiVersion: v1
kind: Service
metadata:
  name: recommendationservice
spec:
  type: ClusterIP
  selector:
    app: recommendationservice
  ports:
  - name: grpc
    port: 8080
    targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
spec:
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
      annotations:
        sidecar.istio.io/rewriteAppHTTPProbers: "true"
    spec:
      serviceAccountName: default
      containers:
        - name: server
          image: gcr.io/google-samples/microservices-demo/frontend:v0.3.4
          ports:
          - containerPort: 8080
          readinessProbe:
            initialDelaySeconds: 10
            httpGet:
              path: "/_healthz"
              port: 8080
              httpHeaders:
              - name: "Cookie"
                value: "shop_session-id=x-readiness-probe"
          livenessProbe:
            initialDelaySeconds: 10
            httpGet:
              path: "/_healthz"
              port: 8080
              httpHeaders:
              - name: "Cookie"
                value: "shop_session-id=x-liveness-probe"
          env:
          - name: PORT
            value: "8080"
          - name: PRODUCT_CATALOG_SERVICE_ADDR
            value: "productcatalogservice:3550"
          - name: CURRENCY_SERVICE_ADDR
            value: "currencyservice:7000"
          - name: CART_SERVICE_ADDR
            value: "cartservice:7070"
          - name: RECOMMENDATION_SERVICE_ADDR
            value: "recommendationservice:8080"
          - name: SHIPPING_SERVICE_ADDR
            value: "shippingservice:50051"
          - name: CHECKOUT_SERVICE_ADDR
            value: "checkoutservice:5050"
          - name: AD_SERVICE_ADDR
            value: "adservice:9555"
          # # ENV_PLATFORM: One of: local, gcp, aws, azure, onprem, alibaba
          # # When not set, defaults to "local" unless running in GKE, otherwies auto-sets to gcp 
          # - name: ENV_PLATFORM 
          #   value: "gcp"
          # - name: DISABLE_TRACING
          #   value: "1"
          # - name: DISABLE_PROFILER
          #   value: "1"
          # - name: JAEGER_SERVICE_ADDR
          #   value: "jaeger-collector:14268"
          # - name: CYMBAL_BRANDING
          #   value: "true"
          resources:
            requests:
              cpu: 100m
              memory: 64Mi
            limits:
              cpu: 200m
              memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: frontend
spec:
  type: ClusterIP
  selector:
    app: frontend
  ports:
  - name: http
    port: 80
    targetPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: frontend-external
spec:
  type: LoadBalancer
  selector:
    app: frontend
  ports:
  - name: http
    port: 80
    targetPort: 8080
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: paymentservice
spec:
  selector:
    matchLabels:
      app: paymentservice
  template:
    metadata:
      labels:
        app: paymentservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/paymentservice:v0.3.4
        ports:
        - containerPort: 50051
        env:
        - name: PORT
          value: "50051"
        readinessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:50051"]
        livenessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:50051"]
        resources:
          requests:
            cpu: 100m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: paymentservice
spec:
  type: ClusterIP
  selector:
    app: paymentservice
  ports:
  - name: grpc
    port: 50051
    targetPort: 50051
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: productcatalogservice
spec:
  selector:
    matchLabels:
      app: productcatalogservice
  template:
    metadata:
      labels:
        app: productcatalogservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/productcatalogservice:v0.3.4
        ports:
        - containerPort: 3550
        env:
        - name: PORT
          value: "3550"
        # - name: DISABLE_STATS
        #   value: "1"
        # - name: DISABLE_TRACING
        #   value: "1"
        # - name: DISABLE_PROFILER
        #   value: "1"
        # - name: JAEGER_SERVICE_ADDR
        #   value: "jaeger-collector:14268"
        readinessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:3550"]
        livenessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:3550"]
        resources:
          requests:
            cpu: 100m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: productcatalogservice
spec:
  type: ClusterIP
  selector:
    app: productcatalogservice
  ports:
  - name: grpc
    port: 3550
    targetPort: 3550
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: cartservice
spec:
  selector:
    matchLabels:
      app: cartservice
  template:
    metadata:
      labels:
        app: cartservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/cartservice:v0.3.4
        ports:
        - containerPort: 7070
        env:
        - name: REDIS_ADDR
          value: "redis-cart:6379"
        resources:
          requests:
            cpu: 200m
            memory: 64Mi
          limits:
            cpu: 300m
            memory: 128Mi
        readinessProbe:
          initialDelaySeconds: 15
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:7070", "-rpc-timeout=5s"]
        livenessProbe:
          initialDelaySeconds: 15
          periodSeconds: 10
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:7070", "-rpc-timeout=5s"]
---
apiVersion: v1
kind: Service
metadata:
  name: cartservice
spec:
  type: ClusterIP
  selector:
    app: cartservice
  ports:
  - name: grpc
    port: 7070
    targetPort: 7070
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: loadgenerator
spec:
  selector:
    matchLabels:
      app: loadgenerator
  replicas: 1
  template:
    metadata:
      labels:
        app: loadgenerator
      annotations:
        sidecar.istio.io/rewriteAppHTTPProbers: "true"
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      restartPolicy: Always
      initContainers:
      - command:
        - /bin/sh
        - -exc
        - |
          echo "Init container pinging frontend: ${FRONTEND_ADDR}..."
          STATUSCODE=$(wget --server-response http://${FRONTEND_ADDR} 2&gt;&amp;1 | awk '/^  HTTP/{print $2}')
          if test $STATUSCODE -ne 200; then
              echo "Error: Could not reach frontend - Status code: ${STATUSCODE}"
              exit 1
          fi
        name: frontend-check
        image: busybox:latest
        env:
        - name: FRONTEND_ADDR
          value: "frontend:80"
      containers:
      - name: main
        image: gcr.io/google-samples/microservices-demo/loadgenerator:v0.3.4
        env:
        - name: FRONTEND_ADDR
          value: "frontend:80"
        - name: USERS
          value: "10"
        resources:
          requests:
            cpu: 300m
            memory: 256Mi
          limits:
            cpu: 500m
            memory: 512Mi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: currencyservice
spec:
  selector:
    matchLabels:
      app: currencyservice
  template:
    metadata:
      labels:
        app: currencyservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/currencyservice:v0.3.4
        ports:
        - name: grpc
          containerPort: 7000
        env:
        - name: PORT
          value: "7000"
        # - name: DISABLE_TRACING
        #   value: "1"
        # - name: DISABLE_PROFILER
        #   value: "1"
        # - name: DISABLE_DEBUGGER
        #   value: "1"
        readinessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:7000"]
        livenessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:7000"]
        resources:
          requests:
            cpu: 100m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: currencyservice
spec:
  type: ClusterIP
  selector:
    app: currencyservice
  ports:
  - name: grpc
    port: 7000
    targetPort: 7000
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: shippingservice
spec:
  selector:
    matchLabels:
      app: shippingservice
  template:
    metadata:
      labels:
        app: shippingservice
    spec:
      serviceAccountName: default
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/shippingservice:v0.3.4
        ports:
        - containerPort: 50051
        env:
        - name: PORT
          value: "50051"
        # - name: DISABLE_STATS
        #   value: "1"
        # - name: DISABLE_TRACING
        #   value: "1"
        # - name: DISABLE_PROFILER
        #   value: "1"
        # - name: JAEGER_SERVICE_ADDR
        #   value: "jaeger-collector:14268"
        readinessProbe:
          periodSeconds: 5
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:50051"]
        livenessProbe:
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:50051"]
        resources:
          requests:
            cpu: 100m
            memory: 64Mi
          limits:
            cpu: 200m
            memory: 128Mi
---
apiVersion: v1
kind: Service
metadata:
  name: shippingservice
spec:
  type: ClusterIP
  selector:
    app: shippingservice
  ports:
  - name: grpc
    port: 50051
    targetPort: 50051
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis-cart
spec:
  selector:
    matchLabels:
      app: redis-cart
  template:
    metadata:
      labels:
        app: redis-cart
    spec:
      containers:
      - name: redis
        image: redis:alpine
        ports:
        - containerPort: 6379
        readinessProbe:
          periodSeconds: 5
          tcpSocket:
            port: 6379
        livenessProbe:
          periodSeconds: 5
          tcpSocket:
            port: 6379
        volumeMounts:
        - mountPath: /data
          name: redis-data
        resources:
          limits:
            memory: 256Mi
            cpu: 125m
          requests:
            cpu: 70m
            memory: 200Mi
      volumes:
      - name: redis-data
        emptyDir: {}
---
apiVersion: v1
kind: Service
metadata:
  name: redis-cart
spec:
  type: ClusterIP
  selector:
    app: redis-cart
  ports:
  - name: redis
    port: 6379
    targetPort: 6379
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: adservice
spec:
  selector:
    matchLabels:
      app: adservice
  template:
    metadata:
      labels:
        app: adservice
    spec:
      serviceAccountName: default
      terminationGracePeriodSeconds: 5
      containers:
      - name: server
        image: gcr.io/google-samples/microservices-demo/adservice:v0.3.4
        ports:
        - containerPort: 9555
        env:
        - name: PORT
          value: "9555"
        # - name: DISABLE_STATS
        #   value: "1"
        # - name: DISABLE_TRACING
        #   value: "1"
        # - name: JAEGER_SERVICE_ADDR
        #   value: "jaeger-collector:14268"
        resources:
          requests:
            cpu: 200m
            memory: 180Mi
          limits:
            cpu: 300m
            memory: 300Mi
        readinessProbe:
          initialDelaySeconds: 20
          periodSeconds: 15
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:9555"]
        livenessProbe:
          initialDelaySeconds: 20
          periodSeconds: 15
          exec:
            command: ["/bin/grpc_health_probe", "-addr=:9555"]
---
apiVersion: v1
kind: Service
metadata:
  name: adservice
spec:
  type: ClusterIP
  selector:
    app: adservice
  ports:
  - name: grpc
    port: 9555
    targetPort: 9555
---
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">kustomize-cdng/base/kustomization.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-125">View</button>
        <dialog id="modal-125" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">resources:
  - my-app.yaml</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">kustomize-cdng/base/my-app.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-126">View</button>
        <dialog id="modal-126" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: apps/v1
kind: Deployment
metadata:
  name: rohan-helloworld
  namespace: sandbox
  labels:
    app: rohan-helloworld
  annotations:
spec:
  selector:
    matchLabels:
      app: rohan-helloworld
  replicas: 1
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  template:
    metadata:
      labels:
        app: rohan-helloworld
    spec:
      containers:
      - name: rohan-helloworld
        image: harness/todolist-sample:latest
        imagePullPolicy: Always
        ports:
        - containerPort: 5000
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">kustomize-cdng/overlays/dev/kustomization.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-127">View</button>
        <dialog id="modal-127" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">kustomize-cdng/patch.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-128">View</button>
        <dialog id="modal-128" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: apps/v1
kind: Deployment
metadata:
 name: rohan-helloworld
 namespace: sandbox
spec:
 template :
   spec:
     containers:
       - name: rohan-helloworld
         image: &lt;+serviceConfig.serviceDefinition.spec.variables.image&gt;
 
---
apiVersion: apps/v1
kind: Deployment
metadata:
 name: rohan-helloworld
 namespace: sandbox
spec:
 replicas: &lt;+serviceConfig.serviceDefinition.spec.variables.replica&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">pipelines/approval.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-129">View</button>
        <dialog id="modal-129" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Approval
  identifier: Approval
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: approve
        identifier: approve
        description: ""
        type: Approval
        spec:
          execution:
            steps:
              - step:
                  name: rohan
                  identifier: rohan
                  type: HarnessApproval
                  timeout: 1d
                  spec:
                    approvalMessage: |-
                      Please review the following information
                      and approve the pipeline progression
                    includePipelineExecutionHistory: true
                    approvers:
                      minimumCount: 1
                      disallowPipelineExecutor: false
                      userGroups:
                        - account.ProductManagement
                    isAutoRejectEnabled: false
                    approverInputs:
                      - name: name
                        defaultValue: &lt;+input&gt;
        tags: {}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">sony_pipeline.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-130">View</button>
        <dialog id="modal-130" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">pipeline:
  name: Remote Pipeline Demo
  identifier: sony
  projectIdentifier: PM_Signoff
  orgIdentifier: default
  tags: {}
  stages:
    - stage:
        name: Deploy
        identifier: Deploy
        description: ""
        type: Deployment
        spec:
          deploymentType: NativeHelm
          service:
            serviceRef: helm
            serviceInputs:
              serviceDefinition:
                type: NativeHelm
                spec:
                  artifacts:
                    primary:
                      primaryArtifactRef: &lt;+input&gt;
                      sources: &lt;+input&gt;
          environment:
            environmentRef: k8sdev
            deployToAll: false
            infrastructureDefinitions:
              - identifier: helmdev
                inputs:
                  identifier: helmdev
                  type: KubernetesDirect
                  spec:
                    namespace: dev
          execution:
            steps:
              - step:
                  type: ShellScript
                  name: echo
                  identifier: echo
                  spec:
                    shell: Bash
                    executionTarget: {}
                    source:
                      type: Inline
                      spec:
                        script: echo "Hello"
                    environmentVariables: []
                    outputVariables: []
                  timeout: 10m
            rollbackSteps:
              - step:
                  name: Helm Rollback
                  identifier: helmRollback
                  type: HelmRollback
                  timeout: 10m
                  spec: {}
        tags: {}
        failureStrategies:
          - onFailure:
              errors:
                - AllErrors
              action:
                type: MarkAsFailure
  notificationRules:
    - name: Failure
      identifier: Failure
      pipelineEvents:
        - type: PipelineFailed
        - type: StageFailed
          forStages:
            - AllStages
        - type: StepFailed
      notificationMethod:
        type: Slack
        spec:
          userGroups:
            - account._account_all_users
          webhookUrl: ""
      enabled: true
    - name: Success
      identifier: Success
      pipelineEvents:
        - type: PipelineSuccess
        - type: StageSuccess
          forStages:
            - AllStages
      notificationMethod:
        type: Slack
        spec:
          userGroups:
            - account._account_all_users
          webhookUrl: ""
      enabled: true
    - name: Job Start Slack Notification
      identifier: Job_Start_Slack_Notification
      pipelineEvents:
        - type: PipelineStart
      notificationMethod:
        type: Slack
        spec:
          userGroups:
            - account._account_all_users
          webhookUrl: ""
      enabled: true
  properties:
    ci:
      codebase:
        connectorRef: ThisRohanGupta
        repoName: Product-Management
        build: &lt;+input&gt;
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/backend/deployment.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-131">View</button>
        <dialog id="modal-131" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: v1
kind: Namespace
metadata:
  name: {{.Values.namespace}}
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{.Values.name}}
spec:
  replicas: {{.Values.replicas}}
  selector:
    matchLabels:
      app: {{.Values.name}}
  template:
    metadata:
      labels:
        app: {{.Values.name}}
    spec:
      containers:
      - name: {{.Values.name}}
        image: {{.Values.image}}
        imagePullPolicy: Always
        readinessProbe:
          httpGet:
            path: /color
            port: http
          initialDelaySeconds: 5
          periodSeconds: 5
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
          requests:
            cpu: 100m
            memory: 50Mi
        ports:
        - name: http
          containerPort: 80
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/backend/nginx.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-132">View</button>
        <dialog id="modal-132" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: k8s.nginx.org/v1
kind: VirtualServerRoute
metadata:
  name: {{.Values.name}}
spec:
  host: {{.Values.host}}
  upstreams:
  - name: {{.Values.primaryName}}
    service: {{.Values.primaryName}}
    port: 80
  - name: {{.Values.stageName}}
    service: {{.Values.stageName}}
    port: 80
  subroutes:
  - path: /{{.Values.primaryEndpoint}}
    action:
      proxy:
        upstream: {{.Values.primaryName}}
        rewritePath: /color/index.html
  - path: /{{.Values.stageEndpoint}}
    action:
      proxy:
        upstream: {{.Values.stageName}}
        rewritePath: /color/index.html
  - path: /{{.Values.endpoint}}
    {{- if .Values.splitTraffic}}
    splits:
    - weight: {{.Values.primaryWeight}}
      action:
        proxy:
          upstream: {{.Values.primaryName}}
          rewritePath: /color/index.html
    - weight: {{.Values.stageWeight}}
      action:
        proxy:
          upstream: {{.Values.stageName}}
          rewritePath: /color/index.html
    {{- else}}
    action:
      proxy:
        upstream: {{.Values.primaryName}}
        rewritePath: /color/index.html
    {{- end}}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/backend/service.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-133">View</button>
        <dialog id="modal-133" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">#
# Service targeting primary
#
apiVersion: v1
kind: Service
metadata:
  name: {{.Values.primaryName}}
  annotations:
    harness.io/primary-service: "true"
spec:
  type: ClusterIP
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: http
  selector:
    app: {{.Values.name}}
---
#
# Service targeting stage
#
apiVersion: v1
kind: Service
metadata:
  name: {{.Values.stageName}}
  annotations:
    harness.io/stage-service: "true"
spec:
  type: ClusterIP
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: http
  selector:
    app: {{.Values.name}}
---
apiVersion: k8s.nginx.org/v1
kind: VirtualServer
metadata:
  name: {{.Values.name}}
spec:
  host: {{.Values.host}}
  routes:
  - path: /{{.Values.endpoint}}
    route: {{.Values.name}}
  - path: /{{.Values.frontend.uiPath}}
    route: {{.Values.frontend.uiPath}}
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/frontend/ui.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-134">View</button>
        <dialog id="modal-134" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{.Values.frontend.uiPath}}
  annotations:
    harness.io/direct-apply: true
spec:
  replicas: 1
  selector:
    matchLabels:
      app: {{.Values.frontend.uiPath}}
  strategy:
    type: RollingUpdate
  template:
    metadata:
      labels:
        app: {{.Values.frontend.uiPath}}
    spec:
      terminationGracePeriodSeconds: 2
      containers:
      - name: color-ui
        image: {{.Values.frontend.image}}
        imagePullPolicy: IfNotPresent
        env:
        - name: LOAD_BALANCER
          value: {{.Values.frontend.loadBalancer}}
        - name: ENDPOINT
          value: {{.Values.endpoint}}
        - name: TARGET1
          value: {{.Values.stageEndpoint}}
        - name: TARGET2
          value: {{.Values.primaryEndpoint}}
        - name: TITLE
          value: {{.Values.frontend.title}}
        - name: UI_PATH
          value: {{.Values.frontend.uiPath}}
        ports:
        - name: http
          containerPort: 80
          protocol: TCP
        resources:
          limits:
            memory: 50Mi
            cpu: 10m
          requests:
            memory: 50Mi
            cpu: 10m
---
apiVersion: v1
kind: Service
metadata:
  name: {{.Values.frontend.uiPath}}
spec:
  ports:
  - name: http
    port: 80
    protocol: TCP
    targetPort: http
  selector:
    app: {{.Values.frontend.uiPath}}
  type: ClusterIP
---
apiVersion: k8s.nginx.org/v1
kind: VirtualServerRoute
metadata:
  name: {{.Values.frontend.uiPath}}
spec:
  host: {{.Values.host}}
  upstreams:
  - name: {{.Values.frontend.uiPath}}
    service: {{.Values.frontend.uiPath}}
    port: 80
  subroutes:
  - path: /{{.Values.frontend.uiPath}}
    action:
      proxy:
        upstream: {{.Values.frontend.uiPath}}
        rewritePath: /
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/templates/pipelines/nginx-canary.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-135">View</button>
        <dialog id="modal-135" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">template:
  name: nginx-canary
  type: Pipeline
  projectIdentifier: Rohan
  orgIdentifier: default
  spec:
    stages:
      - stage:
          name: Deploy
          identifier: Deploy
          description: ""
          type: Deployment
          spec:
            deploymentType: Kubernetes
            service:
              serviceRef: nginxcanary
              serviceInputs:
                serviceDefinition:
                  type: Kubernetes
                  spec:
                    artifacts:
                      primary:
                        primaryArtifactRef: &lt;+input&gt;
                        sources: &lt;+input&gt;
            environment:
              environmentRef: &lt;+input&gt;
              deployToAll: false
              environmentInputs: &lt;+input&gt;
              infrastructureDefinitions: &lt;+input&gt;
            execution:
              steps:
                - stepGroup:
                    name: Canary Deployment
                    identifier: canaryDepoyment
                    steps:
                      - step:
                          name: Canary Deployment
                          identifier: canaryDeployment
                          type: K8sCanaryDeploy
                          timeout: 10m
                          spec:
                            instanceSelection:
                              type: Count
                              spec:
                                count: 1
                            skipDryRun: false
                      - step:
                          type: Http
                          name: 100 Requests
                          identifier: _Requests
                          spec:
                            method: GET
                            headers: []
                            outputVariables: []
                            url: http://&lt;+serviceVariable.host&gt;
                          timeout: 10s
                      - step:
                          type: HarnessApproval
                          name: Approve 10 Percent
                          identifier: Approve_10_Percent
                          spec:
                            approvalMessage: Please review the following information and approve the pipeline progression
                            includePipelineExecutionHistory: true
                            approvers:
                              userGroups:
                                - account.ProductManagement
                              minimumCount: 1
                              disallowPipelineExecutor: false
                            approverInputs: []
                          timeout: 1d
                      - step:
                          type: K8sApply
                          name: Ten Percent Traffic Shift
                          identifier: Ten_Percent_Traffic_Shift
                          spec:
                            filePaths:
                              - backend/nginx.yaml
                            skipDryRun: false
                            skipSteadyStateCheck: false
                            skipRendering: false
                            overrides:
                              - manifest:
                                  identifier: Shift10.yaml
                                  type: Values
                                  spec:
                                    store:
                                      type: Inline
                                      spec:
                                        content: |-
                                          splitTraffic: true
                                          stableWeight: 90
                                          canaryWeight: 10
                          timeout: 10m
                      - step:
                          type: HarnessApproval
                          name: Approve 40 Percent
                          identifier: Approve_40_Percent
                          spec:
                            approvalMessage: Please review the following information and approve the pipeline progression
                            includePipelineExecutionHistory: true
                            approvers:
                              userGroups:
                                - account.ProductManagement
                              minimumCount: 1
                              disallowPipelineExecutor: false
                            approverInputs: []
                          timeout: 1d
                      - step:
                          type: K8sApply
                          name: Apply 40 Percent
                          identifier: Apply_40_Percent
                          spec:
                            filePaths:
                              - backend/nginx.yaml
                            skipDryRun: false
                            skipSteadyStateCheck: false
                            skipRendering: false
                            overrides:
                              - manifest:
                                  identifier: Shift40.yaml
                                  type: Values
                                  spec:
                                    store:
                                      type: Inline
                                      spec:
                                        content: |
                                          splitTraffic: true
                                          stableWeight: 60
                                          canaryWeight: 40
                          timeout: 10m
                - stepGroup:
                    name: Primary Deployment
                    identifier: primaryDepoyment
                    steps:
                      - step:
                          name: Rolling Deployment
                          identifier: rollingDeployment
                          type: K8sRollingDeploy
                          timeout: 10m
                          spec:
                            skipDryRun: false
                      - step:
                          name: Canary Delete
                          identifier: canaryDelete
                          type: K8sCanaryDelete
                          timeout: 10m
                          spec: {}
              rollbackSteps:
                - step:
                    name: Canary Delete
                    identifier: rollbackCanaryDelete
                    type: K8sCanaryDelete
                    timeout: 10m
                    spec: {}
                - step:
                    name: Rolling Rollback
                    identifier: rollingRollback
                    type: K8sRollingRollback
                    timeout: 10m
                    spec: {}
          tags: {}
          failureStrategies:
            - onFailure:
                errors:
                  - AllErrors
                action:
                  type: StageRollback
  identifier: nginxcanary
  versionLabel: 1.0.0
</pre>
          </div>
        </dialog>
      </div>

      <div class="border rounded-lg p-4 bg-white shadow">
        <h2 class="font-semibold text-sm break-all">traffic-shifting-nginx/values.yaml</h2>
        <button class="mt-2 text-sm text-blue-600 underline" data-modal="modal-136">View</button>
        <dialog id="modal-136" class="p-0 rounded-lg w-11/12 max-w-3xl">
          <div class="p-4 overflow-auto max-h-[80vh]">
            <button class="text-sm mb-2" data-close>Close</button>
            <pre class="whitespace-pre-wrap text-xs">name: &lt;+serviceVariable.name&gt;
host: &lt;+serviceVariable.host&gt;
image: &lt;+artifact.image&gt;
canaryName: &lt;+serviceVariable.canaryName&gt;
stableName: &lt;+serviceVariable.stableName&gt;
endpoint: color
canaryEndpoint: color-canary
stableEndpoint: color-stable
splitTraffic: false

replicas: 2
namespace: &lt;+infra.namespace&gt;

frontend:
  title: Nginx - Canary Traffic Shift
  loadBalancer: http://&lt;+serviceVariable.host&gt;
  ui: nginx-canary
  image: us.gcr.io/sales-209522/continuous-requests:110
</pre>
          </div>
        </dialog>
      </div>
  </main>
<script>
  document.querySelectorAll('[data-modal]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.getAttribute('data-modal');
      const dialog = document.getElementById(id);
      dialog.showModal();
    });
  });
  document.querySelectorAll('dialog [data-close]').forEach(btn => {
    btn.addEventListener('click', () => btn.closest('dialog').close());
  });
</script>
</body>
</html>
